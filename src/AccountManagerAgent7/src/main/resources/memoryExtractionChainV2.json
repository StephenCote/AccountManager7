{
	"schema": "tool.plan",
	"name": "MemoryExtractionChainV2",
	"planQuery": "Extract the single most important memory from a conversation segment and persist it",
	"planPromptConfigName": "MemoryExtraction Prompt",
	"planChatName": "MemoryExtraction Chat",
	"maxSteps": 5,
	"chainMode": true,
	"executed": false,
	"totalExecutedSteps": 0,
	"steps": [
		{
			"step": 1,
			"stepType": "LLM",
			"stepStatus": "PENDING",
			"promptConfigName": "MemoryExtraction Prompt",
			"dynamic": false,
			"parentStep": -1,
			"summaryText": "LLM call to extract the single most important memory from the conversation segment. Uses the focused V2 extraction prompt with character names and setting.",
			"inputs": [
				{
					"name": "extractMemories",
					"valueType": "string",
					"value": "Extract the single most important memory from the following conversation segment between {{systemCharName}} and {{userCharName}} in {{setting}}. If nothing is genuinely memorable, return an empty JSON array [].\n\nConversation segment:\n{{conversationSegment}}"
				}
			]
		},
		{
			"step": 2,
			"stepType": "TOOL",
			"stepStatus": "PENDING",
			"toolName": "extractMemories",
			"dynamic": false,
			"parentStep": -1,
			"summaryText": "Persist the LLM-extracted memory with deduplication. Takes the JSON array output from step 1 and stores the memory with person pair tagging.",
			"inputs": [
				{
					"name": "text",
					"valueType": "string",
					"value": "{{extractMemories_result}}"
				},
				{
					"name": "conversationId",
					"valueType": "string",
					"value": "{{conversationId}}"
				},
				{
					"name": "personId1",
					"valueType": "long",
					"value": "{{personId1}}"
				},
				{
					"name": "personId2",
					"valueType": "long",
					"value": "{{personId2}}"
				}
			]
		}
	]
}
