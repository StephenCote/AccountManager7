/* ═══════════════════════════════════════════════════════
   Card Game v2 Styles
   ═══════════════════════════════════════════════════════ */

/* ── Card Size System (Responsive) ─────────────────── */
:root {
    /* Base card dimensions - standard playing card ratio 2.5:3.5 */
    --card-width: 180px;
    --card-height: calc(var(--card-width) * 1.4);
    --card-border-radius: 10px;

    /* Compact cards (hand tray, action bar) */
    --card-compact-width: 120px;
    --card-compact-height: calc(var(--card-compact-width) * 1.4);

    /* Mini cards (action bar positions) */
    --card-mini-width: 70px;
    --card-mini-height: calc(var(--card-mini-width) * 1.4);

    /* Initiative cards */
    --card-init-width: 140px;
    --card-init-height: calc(var(--card-init-width) * 1.4);

    /* Preview/full-size cards */
    --card-preview-width: 280px;
    --card-preview-height: calc(var(--card-preview-width) * 1.4);

    /* Font scaling */
    --card-font-scale: 1;

    /* Card type colors (Phase 7.0) */
    --card-character-color: #B8860B;
    --card-character-bg: #FDF5E6;
    --card-apparel-color: #808080;
    --card-apparel-bg: #F5F5F5;
    --card-item-color: #2E7D32;
    --card-item-bg: #F1F8E9;
    --card-action-color: #C62828;
    --card-action-bg: #FFF3F0;
    --card-talk-color: #1565C0;
    --card-talk-bg: #E3F2FD;
    --card-encounter-color: #6A1B9A;
    --card-encounter-bg: #F3E5F5;
    --card-skill-color: #E65100;
    --card-skill-bg: #FFF3E0;
    --card-magic-color: #00695C;
    --card-magic-bg: #E0F2F1;

    /* Semantic colors */
    --color-success: #43A047;
    --color-danger: #e53935;
    --color-warning: #FFB300;
    --color-info: #1E88E5;
    --color-hp: #e53935;
    --color-energy: #1E88E5;
    --color-morale: #43A047;

    /* Spacing scale */
    --space-xs: 4px;
    --space-sm: 8px;
    --space-md: 16px;
    --space-lg: 24px;
}

/* Tablet breakpoint (768-1199px) */
@media (max-width: 1199px) {
    :root {
        --card-width: 150px;
        --card-compact-width: 100px;
        --card-mini-width: 60px;
        --card-init-width: 120px;
        --card-preview-width: 240px;
        --card-font-scale: 0.9;
    }
}

/* Mobile breakpoint (<768px) */
@media (max-width: 767px) {
    :root {
        --card-width: 120px;
        --card-compact-width: 85px;
        --card-mini-width: 50px;
        --card-init-width: 100px;
        --card-preview-width: 200px;
        --card-font-scale: 0.8;
    }
}

/* ── Layout ─────────────────────────────────────────── */
.cg2-container {
    padding: 16px;
    max-width: 1400px;
    margin: 0 auto;
    overflow-y: auto;
    flex: 1;
    color: #333;
}
/* Game mode: fill available height without scroll (class-based fallback + :has) */
.cg2-container.cg2-game-mode,
.cg2-container:has(.cg2-game-container) {
    display: flex;
    flex-direction: column;
    height: 100%;
    max-width: none;
    padding: 0;
    overflow: hidden;
}
.cg2-toolbar {
    display: flex; gap: 8px; align-items: center;
    margin-bottom: 16px; flex-wrap: wrap;
}
.cg2-toolbar button {
    padding: 4px 12px; border-radius: 4px; border: 1px solid #ccc;
    cursor: pointer; font-size: 13px; background: #fff; color: #333;
}
.cg2-toolbar button.active {
    background: #333; color: #fff; border-color: #333;
}
.cg2-section-title {
    font-size: 15px; font-weight: 600; margin: 16px 0 8px;
    color: #555; text-transform: uppercase; letter-spacing: 1px;
}

/* ── Card Grid ──────────────────────────────────────── */
.cg2-card-grid {
    display: flex; flex-wrap: wrap; gap: 16px;
    justify-content: flex-start;
}

/* ── Card Base ──────────────────────────────────────── */
.cg2-card {
    width: var(--card-width);
    height: var(--card-height);
    border-radius: var(--card-border-radius);
    border: 3px solid #ccc;
    position: relative;
    overflow: hidden;
    font-family: 'Segoe UI', system-ui, sans-serif;
    font-size: calc(12px * var(--card-font-scale));
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    transition: transform 0.15s, box-shadow 0.15s;
    flex-shrink: 0;
    background-size: cover;
    background-position: center;
}

/* Full-size card (for deck view, preview) */
.cg2-card.cg2-card-full {
    width: var(--card-preview-width);
    height: var(--card-preview-height);
    font-size: calc(12px * 1.2);
}

/* Compact card (hand tray) */
.cg2-card.cg2-card-compact {
    width: var(--card-compact-width);
    height: var(--card-compact-height);
    font-size: calc(10px * var(--card-font-scale));
}
/* Show compact card body with image and condensed stats */
.cg2-card.cg2-card-compact .cg2-card-body-compact {
    display: flex;
    flex-direction: column;
    flex: 1;
    overflow: hidden;
}
.cg2-card.cg2-card-compact .cg2-compact-image {
    height: 50%;
    min-height: 40px;
}
.cg2-card.cg2-card-compact .cg2-compact-image .cg2-card-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.cg2-card.cg2-card-compact .cg2-compact-stats {
    display: flex;
    flex-wrap: wrap;
    gap: 2px;
    padding: 2px;
    justify-content: center;
    align-items: center;
    font-size: 9px;
}
.cg2-compact-stat {
    display: inline-flex;
    align-items: center;
    gap: 1px;
    padding: 1px 3px;
    background: rgba(0,0,0,0.05);
    border-radius: 3px;
    font-weight: 600;
    white-space: nowrap;
}
.cg2-compact-stat .material-symbols-outlined {
    font-size: 10px;
}
.dark .cg2-compact-stat {
    background: rgba(255,255,255,0.1);
}
.cg2-compact-effect {
    font-size: 8px;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
}
.cg2-card.cg2-card-compact .cg2-card-subtitle {
    display: none;
}

/* Mini card (action bar thumbnails) */
.cg2-card.cg2-card-mini {
    width: var(--card-mini-width);
    height: var(--card-mini-height);
    font-size: calc(8px * var(--card-font-scale));
    border-width: 2px;
    padding: 4px;
}
.cg2-card.cg2-card-mini .cg2-card-name {
    font-size: calc(9px * var(--card-font-scale));
    margin-bottom: 0;
}
.cg2-card.cg2-card-mini .cg2-card-body {
    display: none;
}
.cg2-card.cg2-card-mini .cg2-corner {
    font-size: 8px;
    padding: 1px 3px;
}
.cg2-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(0,0,0,0.22);
}

/* ── Card Front ─────────────────────────────────────── */
.cg2-card-front {
    background: #fff;
    display: flex; flex-direction: column;
    padding: 4px 6px 6px;
    position: relative;
}
/* All card types: body fills card */
.cg2-card-front:not(.cg2-card-character) .cg2-card-body {
    margin-top: 0;
    flex: 1;
}
.cg2-card-name {
    font-size: 14px; font-weight: 800;
    text-align: center;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    /* Text glow instead of background */
    text-shadow:
        0 0 3px #fff, 0 0 6px #fff, 0 0 10px #fff,
        1px 1px 2px rgba(0,0,0,0.6), -1px -1px 2px rgba(0,0,0,0.6),
        0 2px 4px rgba(0,0,0,0.4);
    background: transparent;
    padding: 2px 6px;
    max-width: 90%;
    /* Position over the image */
    position: absolute;
    top: 6px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
}
.cg2-card-body {
    flex: 1;
    overflow-y: auto;
    display: flex; flex-direction: column;
    gap: 2px;
}
/* Details container for non-character cards */
.cg2-card-details {
    flex: 1;
    display: flex; flex-direction: column;
    gap: 1px;
    padding: 2px 0;
    overflow-y: auto;
}
/* Icon detail row */
.cg2-icon-detail {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 10px;
}
.cg2-detail-icon {
    font-size: 12px !important;
    opacity: 0.7;
    flex-shrink: 0;
}
.cg2-card-subtitle {
    font-size: 11px; color: #777; font-weight: 600;
    text-align: center;
    display: flex; justify-content: center; gap: 8px;
    text-shadow: 0 1px 2px rgba(0,0,0,0.15);
}
.cg2-level { font-weight: 600; }
.cg2-divider {
    height: 1px; background: #e0e0e0; margin: 4px 0;
}

/* ── Incomplete Card Indicator ─────────────────────── */
.cg2-incomplete-badge {
    position: absolute;
    top: 4px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 18px;
    font-weight: 900;
    color: #F9A825;
    text-shadow: 0 1px 2px rgba(0,0,0,0.3);
    z-index: 5;
    cursor: help;
}
.cg2-card-compact .cg2-incomplete-badge {
    font-size: 14px;
    top: 2px;
}

/* ── Card Back ──────────────────────────────────────── */
.cg2-card-back {
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    color: #fff;
}
.cg2-back-pattern {
    position: absolute; inset: 8px;
    border: 2px solid rgba(255,255,255,0.3);
    border-radius: 6px;
    pointer-events: none;
}
.cg2-back-icon {
    font-size: 56px !important;
    opacity: 0.9;
    margin-bottom: 8px;
    text-shadow: 0 2px 6px rgba(0,0,0,0.3);
}
.cg2-back-label {
    font-size: 14px; font-weight: 600;
    text-transform: uppercase; letter-spacing: 2px;
    opacity: 0.85;
}

/* ── Image Area ──────────────────────────────────────── */
.cg2-race-badge {
    position: absolute; right: 8px; top: 4px;
    font-size: 10px; background: rgba(0,0,0,0.6); color: #fff;
    padding: 1px 6px; border-radius: 8px;
}
.cg2-card-image-area {
    display: flex; align-items: center; justify-content: center;
    height: 50%; min-height: 100px;
    overflow: hidden;
    border-radius: 6px;
    margin-bottom: 4px;
    background: linear-gradient(135deg, #2a2a3a 0%, #1a1a2e 100%);  /* Solid bg prevents card bg bleeding through */
}
.cg2-card-img {
    width: 100%; height: 100%; object-fit: cover; border-radius: 6px;
}
.cg2-placeholder-icon {
    font-size: 56px !important; opacity: 0.35;
}

/* ── Stats ──────────────────────────────────────────── */
.cg2-stat-grid {
    display: flex; flex-direction: column; gap: 2px;
}
.cg2-stat-row {
    display: flex; justify-content: space-around;
}
.cg2-stat-cell {
    display: flex; flex-direction: column; align-items: center; width: 48px;
}
.cg2-stat-abbrev {
    font-size: 10px; font-weight: 800; color: #888; text-transform: uppercase;
    text-shadow: 0 1px 2px rgba(0,0,0,0.12);
}
.cg2-stat-val {
    font-size: 16px; font-weight: 800;
    text-shadow: 0 1px 3px rgba(0,0,0,0.2);
}

/* ── Need Bars ──────────────────────────────────────── */
.cg2-need-row {
    display: flex; align-items: center; gap: 4px;
    height: 18px;
}
.cg2-need-label {
    width: 28px; font-size: 10px; font-weight: 800; color: #666;
    text-align: right;
    text-shadow: 0 1px 2px rgba(0,0,0,0.12);
}
.cg2-need-track {
    flex: 1; height: 10px; background: #e0e0e0; border-radius: 5px;
    overflow: hidden;
}
.cg2-need-fill {
    height: 100%; border-radius: 5px;
    transition: width 0.3s;
}
.cg2-need-value {
    width: 42px; font-size: 10px; font-weight: 700; text-align: left;
    text-shadow: 0 1px 2px rgba(0,0,0,0.12);
}

/* ── Equip / Slots ──────────────────────────────────── */
.cg2-equip-row {
    display: flex; align-items: center; gap: 4px; flex-wrap: wrap;
    font-size: 10px;
}
.cg2-section-label {
    font-weight: 700; color: #888; white-space: nowrap;
    text-shadow: 0 1px 2px rgba(0,0,0,0.12);
}
.cg2-slot {
    display: inline-block;
    padding: 1px 4px; margin: 1px;
    border: 1px solid #ccc; border-radius: 3px;
    font-size: 9px; color: #999; background: #fafafa;
}
.cg2-slot-filled {
    background: #e8f5e9; border-color: #81c784; color: #2e7d32;
}

/* ── Card Meta / Detail Fields ──────────────────────── */
.cg2-card-meta {
    display: flex; justify-content: space-between; align-items: center;
    font-size: 11px; color: #555; font-weight: 600; padding: 0 2px;
    text-shadow: 0 1px 2px rgba(0,0,0,0.12);
}
.cg2-rarity { display: flex; gap: 1px; }
.cg2-card-stats-line {
    display: flex; gap: 8px; padding: 2px 0;
    align-items: center;
}
.cg2-mod {
    font-weight: 800; font-size: 11px;
    text-shadow: 0 1px 3px rgba(0,0,0,0.2);
}
.cg2-mod-atk { color: #c62828; }
.cg2-card-detail {
    font-size: 11px; color: #444; font-weight: 600; padding: 1px 0;
    text-shadow: 0 1px 2px rgba(0,0,0,0.1);
}
.cg2-card-special {
    font-size: 11px; color: #1565C0; font-weight: 600; font-style: italic; padding: 2px 0;
    text-shadow: 0 1px 2px rgba(0,0,0,0.1);
}
.cg2-card-effect {
    font-size: 12px; font-weight: 700; color: #333; padding: 2px 0;
    text-shadow: 0 1px 2px rgba(0,0,0,0.15);
}
.cg2-roll {
    font-family: monospace; font-size: 11px; font-weight: 600; color: #555;
    text-shadow: 0 1px 2px rgba(0,0,0,0.1);
}
.cg2-card-warning {
    color: #c62828; font-weight: 700;
    text-shadow: 0 1px 2px rgba(0,0,0,0.15);
}
.cg2-flavor {
    font-size: 10px; color: #999; font-style: italic;
    text-align: center; margin-top: auto; padding-top: 4px;
}
.cg2-use-or-lose {
    font-size: 12px; font-weight: 800; color: #c62828;
    text-align: center; margin-top: 8px;
    letter-spacing: 1px;
    text-shadow: 0 1px 2px rgba(0,0,0,0.15);
}
.cg2-use-or-lose-sub {
    font-size: 10px; color: #888; text-align: center; padding: 2px 4px;
}
.cg2-card-footer {
    display: flex; justify-content: space-between; align-items: center;
    margin-top: auto; padding-top: 2px;
    font-size: 10px; color: #666; font-weight: 600;
    text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    border-top: 1px solid rgba(0,0,0,0.1);
}
.cg2-card-footer .cg2-icon-detail {
    font-size: 10px;
}
.cg2-card-footer .cg2-detail-icon {
    font-size: 11px !important;
}
.cg2-durability { font-weight: 700; }
.cg2-energy-cost { font-weight: 700; color: #1E88E5; }

/* ── Buttons ──────────────────────────────────────── */
.cg2-btn {
    padding: 6px 14px; border-radius: 5px; border: 1px solid #ccc;
    cursor: pointer; font-size: 13px; background: #fff; color: #333;
    display: inline-flex; align-items: center; gap: 4px;
}
.cg2-btn:hover { background: #f0f0f0; }
.cg2-btn:disabled { opacity: 0.5; cursor: default; }
.cg2-btn-primary { background: #B8860B; color: #fff; border-color: #B8860B; }
.cg2-btn-primary:hover { background: #9a7209; }
.cg2-btn-danger { color: #c62828; border-color: #c62828; }
.cg2-btn-danger:hover { background: #fce4ec; }

/* ── Empty State ──────────────────────────────────── */
.cg2-empty-state {
    text-align: center; padding: 40px; color: #999; font-size: 14px;
}

/* ── Deck Grid ────────────────────────────────────── */
.cg2-deck-grid {
    display: flex; flex-wrap: wrap; gap: 12px;
}
.cg2-deck-card {
    display: flex; gap: 12px; align-items: center;
    padding: 12px; border: 1px solid #e0e0e0; border-radius: 8px;
    width: 320px; background: #fafafa;
    transition: box-shadow 0.15s;
}
.cg2-deck-card:hover { box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
.cg2-deck-portrait img {
    width: 56px; height: 56px; border-radius: 50%; object-fit: cover;
    border: 2px solid #B8860B;
}
.cg2-deck-bg-preview {
    width: 100px; height: 75px; border-radius: 8px;
    border: 2px solid #B8860B;
    display: flex; align-items: flex-end; justify-content: center;
    position: relative; overflow: hidden;
}
.cg2-deck-name-overlay {
    position: absolute; bottom: 0; left: 0; right: 0;
    background: linear-gradient(transparent, rgba(0,0,0,0.85));
    color: #fff; font-weight: 700; font-size: 11px;
    padding: 16px 6px 6px; text-align: center;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    text-shadow: 0 1px 2px rgba(0,0,0,0.5);
}
.cg2-deck-info { flex: 1; min-width: 0; }
.cg2-deck-name { font-weight: 700; font-size: 14px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.cg2-deck-theme-badge {
    display: inline-flex; align-items: center;
    font-size: 10px; font-weight: 600; color: #B8860B;
    padding: 1px 7px; background: #FDF5E6; border: 1px solid #e8d5a0;
    border-radius: 10px; margin-top: 2px;
}
.cg2-deck-meta { font-size: 11px; color: #888; }
.cg2-deck-actions { display: flex; flex-direction: column; gap: 4px; }

/* New card-style deck list */
.cg2-deck-grid-cards {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: flex-start;
}
.cg2-deck-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    width: var(--card-compact-width, 120px);
}
.cg2-deck-card-back {
    width: var(--card-compact-width, 120px);
    height: var(--card-compact-height, 168px);
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    cursor: pointer;
    transition: transform 0.15s, box-shadow 0.15s;
}
.cg2-deck-card-back:hover {
    transform: translateY(-4px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.3);
}
.cg2-deck-back-image {
    width: 100%;
    height: 100%;
}
.cg2-deck-back-default {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #B8860B 0%, #8B6914 100%);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
}
.cg2-deck-back-default .cg2-back-pattern {
    position: absolute;
    inset: 0;
    opacity: 0.1;
    background-image: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 10px,
        rgba(255,255,255,0.1) 10px,
        rgba(255,255,255,0.1) 20px
    );
}
.cg2-deck-back-default .cg2-back-icon {
    font-size: 48px;
    color: rgba(255,255,255,0.9);
}
.cg2-deck-back-default .cg2-back-label {
    font-size: 10px;
    color: rgba(255,255,255,0.8);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-top: 8px;
}
.cg2-deck-item .cg2-deck-name {
    font-weight: 700;
    font-size: 12px;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
}
.cg2-deck-item .cg2-deck-actions {
    display: flex;
    flex-direction: column;
    gap: 4px;
    width: 100%;
}
.cg2-deck-item .cg2-deck-actions .cg2-btn {
    font-size: 11px;
    padding: 4px 8px;
    width: 100%;
    justify-content: center;
}
.cg2-deck-item .cg2-deck-actions .cg2-btn .material-symbols-outlined {
    font-size: 14px;
}
.dark .cg2-deck-back-default {
    background: linear-gradient(135deg, #5a4a10 0%, #3a3008 100%);
}

/* ── Theme Select ─────────────────────────────────── */
.cg2-theme-grid {
    display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 16px;
}
.cg2-theme-card {
    width: 200px; padding: 16px; border: 2px solid #e0e0e0; border-radius: 8px;
    text-align: center; cursor: pointer;
    transition: border-color 0.15s, background 0.15s;
}
.cg2-theme-card:hover { border-color: #B8860B; background: #fffbf0; }
.cg2-theme-selected { border-color: #B8860B; background: #FDF5E6; }
.cg2-theme-name { font-weight: 700; font-size: 14px; margin-top: 6px; }
.cg2-theme-desc { font-size: 11px; color: #777; margin-top: 4px; }
.cg2-theme-badge { font-size: 11px; color: #B8860B; font-weight: 700; margin-top: 6px; }

/* ── Character Picker ─────────────────────────────── */
.cg2-char-grid {
    display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 16px;
    max-height: 420px; overflow-y: auto; padding-right: 4px;
}
.cg2-char-card {
    width: 140px; padding: 10px; border: 2px solid #e0e0e0; border-radius: 8px;
    text-align: center; cursor: pointer; position: relative;
    transition: border-color 0.15s, background 0.15s;
}
.cg2-char-card:hover { border-color: #B8860B; background: #fffbf0; }
.cg2-char-selected { border-color: #B8860B; background: #FDF5E6; }
.cg2-char-card-new { border-style: dashed; }
.cg2-char-portrait img {
    width: 64px; height: 64px; border-radius: 50%; object-fit: cover;
    border: 2px solid #ccc;
}
.cg2-char-selected .cg2-char-portrait img { border-color: #B8860B; }
.cg2-char-name { font-weight: 700; font-size: 13px; margin-top: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.cg2-char-meta { font-size: 10px; color: #888; }
.cg2-char-stats-mini { font-size: 9px; color: #666; margin-top: 4px; }
.cg2-char-stats-mini span { margin-right: 4px; }
.cg2-char-badge {
    position: absolute; top: 4px; right: 6px;
    font-size: 16px; color: #B8860B; font-weight: 700;
}
.cg2-char-source-badge {
    position: absolute; bottom: 4px; left: 6px;
    font-size: 9px; font-weight: 600; padding: 1px 5px;
    background: #e8f5e9; color: #2e7d32; border: 1px solid #a5d6a7;
    border-radius: 3px;
}

/* ── Builder Nav ──────────────────────────────────── */
.cg2-builder-nav {
    display: flex; gap: 8px; justify-content: flex-end;
    padding: 12px 0; border-top: 1px solid #e0e0e0;
    position: sticky; bottom: 0; background: #fff; z-index: 10;
    margin-top: 16px;
}

/* ── Selected Character Chips ────────────────────── */
.cg2-selected-chips {
    display: flex; flex-wrap: wrap; gap: 6px; margin-top: 12px;
}
.cg2-selected-chip {
    display: flex; align-items: center; gap: 6px;
    padding: 4px 10px 4px 4px;
    background: #f9f5eb; border: 1px solid #B8860B; border-radius: 16px;
    font-size: 12px; cursor: pointer; transition: background 0.15s;
}
.cg2-selected-chip:hover { background: #f0e8d4; }
.cg2-selected-chip img {
    width: 24px; height: 24px; border-radius: 50%; object-fit: cover;
}
.cg2-selected-chip .cg2-chip-icon {
    width: 24px; height: 24px; border-radius: 50%;
    background: #B8860B; color: #fff; display: flex; align-items: center;
    justify-content: center; font-size: 14px;
}
.cg2-selected-chip .cg2-chip-remove {
    margin-left: 4px; font-size: 14px; color: #999; cursor: pointer;
}
.cg2-selected-chip .cg2-chip-remove:hover { color: #c00; }

/* ── Deck Name ─────────────────────────────────────── */
.cg2-deck-name-row {
    display: flex; align-items: center; gap: 10px; margin-bottom: 12px;
}
.cg2-deck-name-label {
    font-weight: 600; font-size: 13px; color: #555; white-space: nowrap;
}
.cg2-deck-name-input {
    flex: 1; padding: 6px 10px; font-size: 14px; border: 1px solid #ccc;
    border-radius: 6px; background: #fff; color: #333; font-family: inherit;
}
.cg2-deck-name-input:focus {
    outline: none; border-color: #B8860B; box-shadow: 0 0 0 2px rgba(184,134,11,0.15);
}

/* ── Review ────────────────────────────────────────── */
.cg2-review-summary {
    display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 12px;
    font-size: 13px;
}
.cg2-review-stat {
    padding: 4px 10px; background: #f5f5f5; border-radius: 4px;
    border: 1px solid #e0e0e0;
}

/* ── Loading ───────────────────────────────────────── */
.cg2-loading { color: #888; font-size: 13px; font-style: italic; }

/* ── Art Generation Progress ──────────────────────── */
.cg2-art-progress {
    margin: 12px 0; padding: 12px; background: #f9f9f9;
    border: 1px solid #e0e0e0; border-radius: 8px;
}
.cg2-art-progress-header {
    display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;
}
.cg2-art-progress-bar {
    height: 6px; background: #e0e0e0; border-radius: 3px; overflow: hidden;
}
.cg2-art-progress-fill {
    height: 100%; background: #B8860B; border-radius: 3px;
    transition: width 0.3s ease;
}
.cg2-art-progress-fill-active {
    background: linear-gradient(90deg, #B8860B, #DAA520, #B8860B);
    background-size: 200% 100%;
    animation: cg2-progress-shimmer 1.5s linear infinite;
}
@keyframes cg2-progress-shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}
.cg2-art-progress-current {
    display: flex; align-items: center; gap: 6px;
    margin-top: 8px; font-size: 12px; color: #666;
}
.cg2-art-progress-actions {
    display: flex; gap: 6px; margin-top: 8px;
}
.cg2-art-failures {
    margin-top: 8px; font-size: 11px;
}
.cg2-art-fail-item {
    display: flex; align-items: center; justify-content: space-between;
    padding: 3px 0; color: #c00; border-bottom: 1px solid #f0e0e0;
}

/* ── Card Art Wrapper / Overlay ───────────────────── */
.cg2-card-art-wrapper {
    position: relative;
    display: inline-flex;
    flex-direction: column;
    align-items: center;
}
/* Inner container for card + actions (excludes label) */
.cg2-card-art-inner {
    position: relative;
    display: inline-block;
}
.cg2-card-art-badge {
    position: absolute; top: 6px; left: 6px;
    display: flex; align-items: center; gap: 3px;
    padding: 2px 6px; background: rgba(0,128,0,0.85); color: #fff;
    border-radius: 4px; font-size: 10px; font-weight: 600;
}
.cg2-card-count-badge {
    position: absolute; top: 6px; right: 6px;
    padding: 2px 8px; background: rgba(184,134,11,0.9); color: #fff;
    border-radius: 10px; font-size: 11px; font-weight: 700;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}
.cg2-card-art-overlay {
    position: absolute; top: 0; left: 0; right: 0; bottom: 0;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    background: rgba(255,255,255,0.85); border-radius: 8px;
    font-size: 12px; color: #666; gap: 4px;
}
.cg2-art-overlay-fail {
    background: rgba(255,240,240,0.9); color: #c00;
}
.cg2-card-reimage-btn {
    position: absolute; bottom: 6px; right: 6px;
    width: 28px; height: 28px; border-radius: 50%;
    border: 1px solid #ccc; background: rgba(255,255,255,0.9);
    cursor: pointer; display: flex; align-items: center; justify-content: center;
    transition: background 0.15s, border-color 0.15s;
    opacity: 0;
}
.cg2-card-art-wrapper:hover .cg2-card-reimage-btn { opacity: 1; }
.cg2-card-reimage-btn-visible { opacity: 1; }
.cg2-card-reimage-btn:hover { background: #B8860B; color: #fff; border-color: #B8860B; }
.cg2-card-actions {
    position: absolute; bottom: 4px; right: 4px;
    display: flex; gap: 3px;
}
.cg2-card-action-btn {
    width: 26px; height: 26px; border-radius: 50%;
    border: 1px solid #ccc; background: rgba(255,255,255,0.9);
    cursor: pointer; display: flex; align-items: center; justify-content: center;
    transition: background 0.15s, border-color 0.15s;
    color: #666;
}
.cg2-card-action-btn:hover { background: #B8860B; color: #fff; border-color: #B8860B; }
.cg2-card-action-btn-danger:hover { background: #c62828; border-color: #c62828; }

/* ── Card Editor (inline CRUD) ───────────────────── */
.cg2-card-editor {
    background: #fafafa; border: 1px solid #ddd; border-radius: 8px;
    padding: 14px; margin: 10px 0;
}
.cg2-card-editor-header {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 10px; padding-bottom: 8px; border-bottom: 1px solid #eee;
}
.cg2-card-editor-fields {
    display: grid; grid-template-columns: 1fr 1fr; gap: 8px;
}
.cg2-edit-field {
    display: flex; flex-direction: column; gap: 2px;
}
.cg2-edit-field label {
    font-size: 11px; font-weight: 600; color: #666; text-transform: uppercase;
}
.cg2-edit-field input, .cg2-edit-field select {
    padding: 5px 8px; border: 1px solid #ccc; border-radius: 4px;
    font-size: 12px; background: #fff;
}
.cg2-edit-field input:focus, .cg2-edit-field select:focus {
    border-color: #B8860B; outline: none;
}
.cg2-card-editor-actions {
    display: flex; justify-content: flex-end; gap: 6px; margin-top: 10px;
    padding-top: 8px; border-top: 1px solid #eee;
}

/* ── Add Card Dropdown ───────────────────────────── */
.cg2-add-card-dropdown {
    position: absolute; top: 100%; right: 0; margin-top: 4px; z-index: 100;
    background: #fff; border: 1px solid #ddd; border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15); min-width: 160px;
    overflow: hidden;
}
.cg2-add-card-option {
    display: flex; align-items: center; padding: 8px 12px;
    cursor: pointer; font-size: 12px; transition: background 0.15s;
}
.cg2-add-card-option:hover { background: #f5f0e0; }

/* ── Card Edit Actions (review step) ─────────────── */
.cg2-card-edit-actions {
    position: absolute; top: 4px; right: 4px;
    display: flex; gap: 3px; opacity: 0; transition: opacity 0.15s;
}
.cg2-card-art-wrapper:hover .cg2-card-edit-actions { opacity: 1; }

/* ── Background Panel ────────────────────────────── */
.cg2-bg-panel {
    display: flex; align-items: center; justify-content: space-between;
    padding: 10px 12px; margin-bottom: 8px;
    background: #f5f0e6; border: 1px solid #e0d8c0; border-radius: 8px;
}
.cg2-bg-panel-left {
    display: flex; align-items: center; gap: 8px;
}
.cg2-bg-panel-right {
    display: flex; align-items: center; gap: 6px;
}
.cg2-bg-thumb {
    width: 48px; height: 48px; border-radius: 6px; object-fit: cover;
    border: 1px solid #ccc;
}

/* ── SD Config Panel ──────────────────────────────── */
.cg2-sd-panel {
    margin-bottom: 8px; border: 1px solid #e0d8c0; border-radius: 8px;
    background: #faf8f0; overflow: hidden;
}
.cg2-sd-panel-header {
    display: flex; align-items: center; padding: 8px 12px; cursor: pointer;
    user-select: none;
}
.cg2-sd-panel-header:hover { background: rgba(184,134,11,0.05); }
.cg2-sd-panel-body {
    padding: 8px 12px 12px; border-top: 1px solid #e0d8c0;
}
.cg2-sd-row {
    display: flex; gap: 12px; margin-bottom: 8px;
}
.cg2-sd-field {
    flex: 1; display: flex; flex-direction: column; gap: 2px;
}
.cg2-sd-label {
    font-size: 11px; font-weight: 600; color: #666;
}
.cg2-sd-select, .cg2-sd-input {
    padding: 4px 8px; font-size: 12px; border: 1px solid #ccc;
    border-radius: 4px; background: #fff; color: #333; font-family: inherit;
}
.cg2-sd-select:focus, .cg2-sd-input:focus {
    outline: none; border-color: #B8860B; box-shadow: 0 0 0 2px rgba(184,134,11,0.12);
}
.cg2-sd-range {
    width: 100%; accent-color: #B8860B;
}
.cg2-sd-tabs {
    display: flex; flex-wrap: wrap; gap: 2px; margin-bottom: 10px;
}
.cg2-sd-tab {
    display: flex; align-items: center; padding: 3px 8px; font-size: 11px;
    cursor: pointer; border-radius: 4px 4px 0 0;
    border-bottom: 2px solid transparent;
    color: #888; transition: background 0.15s;
}
.cg2-sd-tab:hover { background: rgba(184,134,11,0.08); color: #555; }
.cg2-sd-tab-active {
    color: #333; font-weight: 600; background: rgba(184,134,11,0.1);
    border-bottom-color: #B8860B;
}
.cg2-sd-tab-sep {
    width: 1px; align-self: stretch; background: #ccc; margin: 2px 2px;
}

/* ── Card Flip ────────────────────────────────────── */
.cg2-card-flipper {
    width: var(--card-width);
    height: var(--card-height);
    perspective: 800px;
    cursor: pointer;
}
.cg2-card-flipper-inner {
    width: 100%; height: 100%;
    position: relative;
    transition: transform 0.5s;
    transform-style: preserve-3d;
}
.cg2-card-flipper.cg2-flipped .cg2-card-flipper-inner {
    transform: rotateY(180deg);
}
.cg2-card-flipper .cg2-card-flip-front,
.cg2-card-flipper .cg2-card-flip-back {
    position: absolute; top: 0; left: 0;
    width: 100%; height: 100%;
    backface-visibility: hidden;
}
.cg2-card-flipper .cg2-card-flip-back {
    transform: rotateY(180deg);
}

/* ── Character Card Back (detail side) ────────────── */
.cg2-char-back {
    display: flex; flex-direction: column;
    padding: 28px 12px 10px;
    gap: 4px;
}
.cg2-char-back-title {
    font-size: 14px; font-weight: 700; text-align: center;
    color: #B8860B; margin-bottom: 2px;
}

/* ── Card Front Background Image ─────────────────── */
.cg2-card-front-bg {
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    background: linear-gradient(135deg, #f5f0e6 0%, #e8dcc8 50%, #f5f0e6 100%);
    color: #B8860B;
}
.cg2-card-front-bg .cg2-back-icon { color: #B8860B; text-shadow: none; }
.cg2-card-front-bg .cg2-back-label { color: #B8860B; }
.cg2-card-front-bg .cg2-back-pattern { border-color: rgba(184,134,11,0.3); }

/* ── Spin animation ───────────────────────────────── */
@keyframes cg2-spin { to { transform: rotate(360deg); } }
.cg2-spin { animation: cg2-spin 1s linear infinite; }

/* ── Dark mode (class-based, matches Tailwind darkMode: 'class') ── */
.dark .cg2-container { color: #ccc; }
.dark .cg2-card-front { background: #1e1e1e; }
.dark .cg2-card-name {
    filter: brightness(1.3);
    text-shadow:
        0 0 4px rgba(0,0,0,0.9), 0 0 8px rgba(0,0,0,0.7), 0 0 12px rgba(0,0,0,0.5),
        0 1px 2px #000, 0 2px 4px rgba(0,0,0,0.8);
    background: transparent;
}
.dark .cg2-divider { background: #444; }
.dark .cg2-card-detail, .dark .cg2-card-meta { color: #bbb; }
.dark .cg2-stat-val { color: #eee; }
.dark .cg2-need-track { background: #444; }
.dark .cg2-slot { background: #2a2a2a; border-color: #555; color: #888; }
.dark .cg2-slot-filled { background: #1b3a1b; border-color: #4a8; color: #8c8; }
.dark .cg2-flavor { color: #777; }
.dark .cg2-toolbar button { background: #2a2a2a; color: #ccc; border-color: #555; }
.dark .cg2-toolbar button.active { background: #eee; color: #111; }
.dark .cg2-btn { background: #2a2a2a; color: #ccc; border-color: #555; }
.dark .cg2-btn:hover { background: #333; }
.dark .cg2-btn-primary { background: #B8860B; color: #fff; border-color: #B8860B; }
.dark .cg2-btn-danger { color: #ef5350; border-color: #ef5350; }
.dark .cg2-deck-card { background: #1e1e1e; border-color: #444; }
.dark .cg2-deck-theme-badge { background: #2a2500; color: #d4a40a; border-color: #5a4a10; }
.dark .cg2-theme-card { border-color: #444; }
.dark .cg2-theme-card:hover { background: #2a2500; border-color: #B8860B; }
.dark .cg2-theme-selected { background: #2a2500; border-color: #B8860B; }
.dark .cg2-char-card { border-color: #444; }
.dark .cg2-char-card:hover { background: #2a2500; }
.dark .cg2-char-selected { background: #2a2500; border-color: #B8860B; }
.dark .cg2-review-stat { background: #2a2a2a; border-color: #444; color: #ccc; }
.dark .cg2-empty-state { color: #666; }
.dark .cg2-builder-nav { background: #1e1e1e; border-top-color: #444; }
.dark .cg2-selected-chip { background: #2a2500; border-color: #B8860B; color: #ccc; }
.dark .cg2-selected-chip:hover { background: #3a3200; }
.dark .cg2-art-progress { background: #2a2a2a; border-color: #444; }
.dark .cg2-art-progress-bar { background: #444; }
.dark .cg2-art-progress-current { color: #aaa; }
.dark .cg2-card-art-overlay { background: rgba(30,30,30,0.85); color: #aaa; }
.dark .cg2-art-overlay-fail { background: rgba(50,20,20,0.9); }
.dark .cg2-card-reimage-btn { background: rgba(30,30,30,0.9); border-color: #555; }
.dark .cg2-card-action-btn { background: rgba(30,30,30,0.9); border-color: #555; color: #aaa; }
.dark .cg2-bg-panel { background: #2a2500; border-color: #444; }
.dark .cg2-bg-thumb { border-color: #555; }
.dark .cg2-deck-name-label { color: #aaa; }
.dark .cg2-deck-name-input { background: #2a2a2a; color: #eee; border-color: #555; }
.dark .cg2-deck-name-input:focus { border-color: #B8860B; }
.dark .cg2-char-source-badge { background: #1b3a1b; color: #8c8; border-color: #4a8; }
.dark .cg2-sd-panel { background: #2a2500; border-color: #444; }
.dark .cg2-sd-panel-body { border-top-color: #444; }
.dark .cg2-sd-label { color: #aaa; }
.dark .cg2-sd-select, .dark .cg2-sd-input { background: #2a2a2a; color: #eee; border-color: #555; }
.dark .cg2-sd-select:focus, .dark .cg2-sd-input:focus { border-color: #B8860B; }
.dark .cg2-sd-tab { color: #777; }
.dark .cg2-sd-tab:hover { background: rgba(184,134,11,0.15); color: #ccc; }
.dark .cg2-sd-tab-active { color: #eee; background: rgba(184,134,11,0.2); }
.dark .cg2-char-back { background: #1e1e1e; }
.dark .cg2-card-front-bg { background: linear-gradient(135deg, #2a2500 0%, #1e1a10 50%, #2a2500 100%); }
.dark .cg2-card-editor { background: #1e1e1e; border-color: #444; }
.dark .cg2-card-editor-header { border-bottom-color: #444; }
.dark .cg2-card-editor-actions { border-top-color: #444; }
.dark .cg2-edit-field label { color: #aaa; }
.dark .cg2-edit-field input, .dark .cg2-edit-field select { background: #2a2a2a; color: #eee; border-color: #555; }
.dark .cg2-edit-field input:focus, .dark .cg2-edit-field select:focus { border-color: #B8860B; }
.dark .cg2-add-card-dropdown { background: #2a2a2a; border-color: #444; }
.dark .cg2-add-card-option:hover { background: #3a3520; }
.dark .cg2-card-edit-actions .cg2-card-action-btn { background: rgba(30,30,30,0.9); border-color: #555; color: #aaa; }

/* ═══════════════════════════════════════════════════════
   Phase 4: Game View Styles
   ═══════════════════════════════════════════════════════ */

/* ── Game Container ────────────────────────────────── */
.cg2-game-container {
    display: flex;
    flex-direction: column;
    flex: 1;
    min-height: 0; /* Allow shrinking in flexbox */
    background: linear-gradient(135deg, #f5f0e6 0%, #e8dcc8 100%);
}
.dark .cg2-game-container {
    background: linear-gradient(135deg, #1a1a1a 0%, #252520 100%);
}

/* ── Game Header ───────────────────────────────────── */
.cg2-game-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 16px;
    background: rgba(255,255,255,0.9);
    border-bottom: 1px solid #e0d8c0;
}
.dark .cg2-game-header {
    background: rgba(30,30,30,0.95);
    border-bottom-color: #444;
}
.cg2-game-title {
    font-size: 18px;
    font-weight: 700;
    color: #B8860B;
}
.cg2-round-badge {
    padding: 3px 10px;
    background: #B8860B;
    color: #fff;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
}
.cg2-phase-badge {
    padding: 3px 10px;
    background: #e0e0e0;
    color: #555;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
    margin-left: auto;
}
.dark .cg2-phase-badge {
    background: #444;
    color: #ccc;
}

/* ── Header Status Area ───────────────────────────── */
.cg2-header-status {
    display: flex;
    align-items: center;
    gap: 12px;
    flex: 1;
    justify-content: center;
}
.cg2-header-turn {
    font-size: 13px;
    font-weight: 600;
    padding: 4px 12px;
    border-radius: 6px;
    background: #f0f0f0;
    color: #666;
}
.cg2-header-turn.cg2-your-turn {
    background: #e8f5e9;
    color: #2e7d32;
}
.dark .cg2-header-turn {
    background: #333;
    color: #aaa;
}
.dark .cg2-header-turn.cg2-your-turn {
    background: #1b3a1b;
    color: #8c8;
}
.cg2-header-ap {
    font-size: 13px;
    color: #B8860B;
    font-weight: 600;
}
.cg2-header-ap strong {
    font-weight: 800;
}
.cg2-btn-sm {
    padding: 4px 10px !important;
    font-size: 12px !important;
}
.cg2-btn-sm .material-symbols-outlined {
    font-size: 14px !important;
}

/* ── Game Main Layout ──────────────────────────────── */
.cg2-game-main {
    display: flex;
    flex: 1;
    min-height: 0; /* Allow shrinking in flexbox */
    overflow: hidden;
    position: relative;
    z-index: 1;
}

/* ── Character Sidebars ────────────────────────────── */
.cg2-game-sidebar {
    width: calc(var(--card-width) + 24px);
    min-width: 160px;
    padding: 12px;
    background: rgba(255,255,255,0.7);
    border-right: 1px solid #e0d8c0;
    overflow-y: auto;
}
@media (max-width: 767px) {
    .cg2-game-sidebar {
        width: calc(var(--card-width) + 16px);
        padding: 8px;
    }
}
.cg2-opponent-side {
    border-right: none;
    border-left: 1px solid #e0d8c0;
}
.dark .cg2-game-sidebar {
    background: rgba(30,30,30,0.7);
    border-color: #444;
}
.cg2-char-sidebar {
    display: flex;
    flex-direction: column;
    gap: 8px;
    align-items: center;
}
/* Sidebar cards use base card size */
.cg2-char-sidebar .cg2-card {
    width: var(--card-width);
    height: var(--card-height);
}
.cg2-sidebar-label {
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    color: #888;
    letter-spacing: 1px;
    align-self: flex-start;
}
.cg2-sidebar-card-wrap {
    margin-bottom: 8px;
}
.cg2-sidebar-card-wrap .cg2-card {
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}
.cg2-sidebar-portrait {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: 3px solid #B8860B;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f5f0e6;
    margin: 0 auto;
}
.cg2-sidebar-portrait img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.cg2-sidebar-portrait .material-symbols-outlined {
    font-size: 48px;
    color: #B8860B;
}
.cg2-sidebar-name {
    font-size: 14px;
    font-weight: 700;
    text-align: center;
    color: #333;
}
.dark .cg2-sidebar-name {
    color: #eee;
}
.cg2-ap-indicator {
    font-size: 12px;
    text-align: center;
    padding: 4px 8px;
    background: rgba(184,134,11,0.1);
    border-radius: 6px;
    color: #B8860B;
    font-weight: 600;
}
.cg2-ap-value {
    font-weight: 800;
}
.cg2-hand-count {
    font-size: 11px;
    display: flex;
    justify-content: center;
    gap: 12px;
    color: #666;
    margin-top: 4px;
}
.dark .cg2-hand-count {
    color: #aaa;
}

/* ── Opponent Hand Backs Stack ───────────────────────── */
.cg2-opp-hand-visual {
    display: flex;
    justify-content: center;
    margin: 8px 0;
    position: relative;
    height: 50px;
}
.cg2-opp-hand-stack {
    position: relative;
    width: 60px;
    height: 50px;
}
.cg2-opp-card-back {
    position: absolute;
    width: 32px;
    height: 44px;
    background: linear-gradient(135deg, #3d2914 0%, #5a3d1e 100%);
    border: 1px solid #8B4513;
    border-radius: 3px;
    box-shadow: 1px 1px 3px rgba(0,0,0,0.3);
    /* Decorative pattern */
    background-image: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 3px,
        rgba(255,255,255,0.03) 3px,
        rgba(255,255,255,0.03) 6px
    );
}
.cg2-opp-card-back::before {
    content: '';
    position: absolute;
    inset: 3px;
    border: 1px solid rgba(184,134,11,0.3);
    border-radius: 2px;
}
.dark .cg2-opp-card-back {
    background: linear-gradient(135deg, #1a1510 0%, #2a2018 100%);
    border-color: #5a4a3a;
}
.cg2-opp-hand-label {
    font-size: 10px;
    color: #888;
    text-align: center;
    margin-top: 4px;
}

/* ── Chat Button (Silence Rule) ─────────────────────── */
.cg2-chat-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    width: 100%;
    padding: 8px 12px;
    margin: 8px 0;
    border-radius: 8px;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}
.cg2-chat-btn .material-symbols-outlined {
    font-size: 16px;
}
.cg2-chat-locked {
    background: rgba(100, 100, 100, 0.3);
    border: 1px solid #555;
    color: #888;
    cursor: not-allowed;
}
.cg2-chat-unlocked {
    background: linear-gradient(135deg, #2e7d32 0%, #43a047 100%);
    border: 2px solid #81c784;
    color: #fff;
    cursor: pointer;
    animation: cg2-chat-glow 1.5s ease-in-out infinite;
}
.cg2-chat-unlocked:hover {
    background: linear-gradient(135deg, #388e3c 0%, #4caf50 100%);
    transform: scale(1.02);
}
@keyframes cg2-chat-glow {
    0%, 100% { box-shadow: 0 0 8px rgba(129, 199, 132, 0.4); }
    50% { box-shadow: 0 0 16px rgba(129, 199, 132, 0.8), 0 0 24px rgba(76, 175, 80, 0.4); }
}

/* ── Sidebar Stats (HP/Energy bars) ─────────────────── */
.cg2-sidebar-stats {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 6px;
    padding: 8px;
    background: rgba(0,0,0,0.03);
    border-radius: 8px;
}
.dark .cg2-sidebar-stats {
    background: rgba(255,255,255,0.05);
}
.cg2-sidebar-stat {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
}
.cg2-stat-icon {
    font-size: 14px;
    width: 18px;
    text-align: center;
}
.cg2-stat-hp .cg2-stat-icon { color: #e53935; }
.cg2-stat-energy .cg2-stat-icon { color: #1E88E5; }
.cg2-stat-bar {
    flex: 1;
    height: 10px;
    background: #e0e0e0;
    border-radius: 5px;
    overflow: hidden;
}
.dark .cg2-stat-bar {
    background: #333;
}
.cg2-stat-fill {
    height: 100%;
    border-radius: 5px;
    transition: width 0.3s ease;
}
.cg2-hp-fill { background: linear-gradient(90deg, #e53935, #ff6659); }
.cg2-energy-fill { background: linear-gradient(90deg, #1E88E5, #42a5f5); }
.cg2-stat-val {
    font-size: 10px;
    font-weight: 700;
    min-width: 36px;
    text-align: right;
    color: #555;
}
.dark .cg2-stat-val { color: #bbb; }

/* ── Sidebar Portrait (clickable) ───────────────────── */
.cg2-sidebar-portrait {
    width: 90px;
    height: 90px;
    border-radius: 50%;
    border: 3px solid #B8860B;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: #f5f0e6;
    cursor: pointer;
    transition: transform 0.15s, box-shadow 0.15s;
    position: relative;
}
.cg2-sidebar-portrait:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 16px rgba(184,134,11,0.4);
}
.cg2-portrait-img-sidebar {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.cg2-portrait-name {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(0,0,0,0.7);
    color: #fff;
    font-size: 9px;
    font-weight: 600;
    text-align: center;
    padding: 2px 4px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* ── Action Panel (consistent bottom area) ──────────── */
.cg2-action-panel {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    gap: 16px;
    padding: 12px 24px;
    background: linear-gradient(to top, rgba(245,240,230,0.95), rgba(245,240,230,0.8));
    border-top: 1px solid #e0d8c0;
    min-height: 60px;
}
.dark .cg2-action-panel {
    background: linear-gradient(to top, rgba(30,30,30,0.95), rgba(30,30,30,0.8));
    border-color: #444;
}
.cg2-action-status {
    flex: 1;
    font-size: 14px;
    color: #555;
    text-align: center;
    min-width: 200px;
}
.cg2-action-buttons {
    display: flex;
    gap: 8px;
    flex-shrink: 0;
}
.cg2-action-status strong {
    color: #B8860B;
}
.dark .cg2-action-status { color: #bbb; }
.dark .cg2-action-status strong { color: #DAA520; }
/* Outcome colors in status bar */
.cg2-status-outcome.cg2-outcome-hit { color: #43A047; }
.cg2-status-outcome.cg2-outcome-counter { color: #e53935; }
.cg2-status-outcome.cg2-outcome-miss { color: #888; }
/* Narrator text overlay */
.cg2-narration-overlay {
    position: fixed;
    bottom: 120px;
    left: 50%;
    transform: translateX(-50%);
    max-width: 600px;
    z-index: 450;  /* Below combat overlay (500) but above most UI */
    animation: cg2-narration-fade-in 0.5s ease-out;
    pointer-events: none;  /* Don't block clicks */
}
@keyframes cg2-narration-fade-in {
    from { opacity: 0; transform: translateX(-50%) translateY(10px); }
    to { opacity: 1; transform: translateX(-50%) translateY(0); }
}
.cg2-narration-text {
    background: linear-gradient(135deg, rgba(30,30,30,0.95), rgba(20,20,20,0.98));
    color: #f0e6d3;
    padding: 16px 24px;
    border-radius: 12px;
    font-size: 15px;
    line-height: 1.5;
    font-style: italic;
    border: 2px solid #B8860B;
    box-shadow: 0 8px 32px rgba(0,0,0,0.4);
    display: flex;
    align-items: flex-start;
    gap: 12px;
}
.cg2-narration-icon {
    color: #B8860B;
    font-size: 24px;
    flex-shrink: 0;
}
.cg2-action-buttons {
    display: flex;
    gap: 12px;
    flex-shrink: 0;
}
.cg2-action-btn-lg {
    padding: 10px 24px !important;
    font-size: 14px !important;
    font-weight: 700 !important;
    min-width: 120px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
}
.cg2-action-btn-lg .material-symbols-outlined {
    font-size: 18px;
}

/* ── Phase Content Area (fixed height) ──────────────── */
.cg2-phase-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 200px;
    overflow: visible;
    position: relative;  /* For absolute positioned overlays like narration */
}

/* ── Status Effects Display ─────────────────────────── */
.cg2-status-effects {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    justify-content: center;
    margin: 8px 0;
}
.cg2-status-effect {
    display: flex;
    align-items: center;
    gap: 2px;
    padding: 3px 6px;
    border: 2px solid;
    border-radius: 12px;
    background: rgba(255,255,255,0.9);
    font-size: 10px;
}
.dark .cg2-status-effect {
    background: rgba(40,40,40,0.9);
}
.cg2-status-icon {
    font-size: 14px;
}
.cg2-status-turns {
    font-weight: 700;
    font-size: 10px;
    min-width: 12px;
    text-align: center;
}

/* ── Fanned Card Stack ────────────────────────────── */
.cg2-fanned-stack {
    margin-top: 8px;
    padding: 8px 4px;
    width: 100%;
}
.cg2-stack-label {
    font-size: 10px;
    font-weight: 600;
    color: #888;
    text-transform: uppercase;
    margin-bottom: 8px;
    text-align: center;
}
.cg2-fanned-cards {
    display: flex;
    justify-content: center;
    position: relative;
    height: 100px;
    perspective: 600px;
}
.cg2-fanned-card-wrap {
    position: absolute;
    left: 50%;
    margin-left: -35px;
    cursor: pointer;
    transition: transform 0.3s ease, z-index 0s;
    transform-style: preserve-3d;
}
.cg2-fanned-card-wrap:hover {
    z-index: 100 !important;
    transform: translateX(var(--fan-x, 0)) rotate(0deg) translateY(-10px) scale(1.1) !important;
}
.cg2-fanned-card-inner {
    position: relative;
    width: 70px;
    height: 98px;
    transition: transform 0.5s;
    transform-style: preserve-3d;
}
.cg2-fanned-card-wrap.cg2-flipped .cg2-fanned-card-inner {
    transform: rotateY(180deg);
}
.cg2-fanned-face {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 6px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}
.cg2-fanned-face .cg2-card {
    width: 100% !important;
    height: 100% !important;
}
.cg2-fanned-face .cg2-card.cg2-card-compact {
    width: 100% !important;
    height: 100% !important;
}
.cg2-fanned-back {
    transform: rotateY(180deg);
}
.cg2-fanned-more {
    position: absolute;
    right: 0;
    bottom: 0;
    font-size: 11px;
    background: #B8860B;
    color: #fff;
    padding: 2px 8px;
    border-radius: 10px;
    font-weight: 700;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

/* Empty stack placeholder */
.cg2-fanned-empty .cg2-stack-label {
    color: #aaa;
}
.cg2-stack-placeholder {
    width: 70px;
    height: 98px;
    border: 2px dashed #ccc;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
    background: rgba(0,0,0,0.02);
}
.dark .cg2-stack-placeholder {
    border-color: #555;
    background: rgba(255,255,255,0.02);
}
.cg2-stack-placeholder .material-symbols-outlined {
    font-size: 24px;
    color: #bbb;
}
.dark .cg2-stack-placeholder .material-symbols-outlined {
    color: #666;
}

/* Legacy small stack icons (kept for reference) */
.cg2-char-stack {
    margin-top: 8px;
    padding: 8px;
    background: rgba(0,0,0,0.03);
    border-radius: 8px;
}
.dark .cg2-char-stack {
    background: rgba(255,255,255,0.03);
}
.cg2-stack-cards {
    display: flex;
    justify-content: center;
    padding: 4px 0;
}
.cg2-stack-card {
    width: 36px;
    height: 48px;
    border-radius: 4px;
    border: 2px solid #ddd;
    background: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    cursor: help;
    transition: transform 0.15s;
}
.dark .cg2-stack-card {
    background: #2a2a2a;
    border-color: #444;
}
.cg2-stack-card:hover {
    transform: translateY(-2px) scale(1.1);
    z-index: 20 !important;
}
.cg2-stack-card-apparel { border-color: #7B1FA2; }
.cg2-stack-card-item { border-color: #558B2F; }
.cg2-stack-card-skill { border-color: #E65100; }
.cg2-stack-card-magic { border-color: #00695C; }
.cg2-stack-icon {
    font-size: 16px;
    color: #666;
}
.dark .cg2-stack-icon {
    color: #aaa;
}
.cg2-stack-card-apparel .cg2-stack-icon { color: #7B1FA2; }
.cg2-stack-card-item .cg2-stack-icon { color: #558B2F; }
.cg2-stack-more {
    position: absolute;
    bottom: -4px;
    right: -4px;
    font-size: 9px;
    background: #B8860B;
    color: #fff;
    padding: 1px 4px;
    border-radius: 8px;
    font-weight: 700;
}

/* ── Game Center Area ──────────────────────────────── */
.cg2-game-center {
    flex: 1;
    min-height: 0; /* Allow shrinking in flexbox */
    display: flex;
    flex-direction: column;
    padding: 16px;
    overflow-y: auto;
}

/* ── Phase Panels ──────────────────────────────────── */
.cg2-phase-panel {
    background: rgba(255,255,255,0.95);
    border: 1px solid #e0d8c0;
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 16px;
    text-align: center;
}
.dark .cg2-phase-panel {
    background: rgba(40,40,40,0.95);
    border-color: #444;
}
.cg2-phase-panel h2 {
    font-size: 18px;
    font-weight: 700;
    color: #B8860B;
    margin: 0 0 8px;
}
.cg2-phase-panel p {
    font-size: 13px;
    color: #666;
    margin: 0 0 12px;
}
.dark .cg2-phase-panel p {
    color: #aaa;
}

/* ── Initiative Phase ──────────────────────────────── */
.cg2-init-rolls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 24px;
    margin: 16px 0;
}
.cg2-init-roll {
    padding: 16px 24px;
    background: #f5f5f5;
    border-radius: 12px;
    border: 2px solid transparent;
    min-width: 180px;
}
.dark .cg2-init-roll {
    background: #2a2a2a;
}
.cg2-init-roll.cg2-winner {
    border-color: #B8860B;
    background: #FDF5E6;
}
.dark .cg2-init-roll.cg2-winner {
    background: #2a2500;
}
.cg2-init-label {
    font-size: 14px;
    font-weight: 700;
    color: #333;
    margin-bottom: 8px;
}
.dark .cg2-init-label {
    color: #eee;
}
.cg2-dice {
    display: inline-block;
    width: 28px;
    height: 28px;
    line-height: 28px;
    background: #B8860B;
    color: #fff;
    border-radius: 4px;
    font-weight: 700;
    text-align: center;
}
.cg2-init-vs {
    font-size: 18px;
    font-weight: 800;
    color: #999;
}
.cg2-init-pending {
    color: #999;
    font-style: italic;
}

/* ── Threat Warning (Nat 1) ─────────────────────────── */
.cg2-threat-warning {
    margin-top: 16px;
    padding: 12px 16px;
    background: rgba(244, 67, 54, 0.15);
    border: 2px solid #F44336;
    border-radius: 8px;
    animation: cg2-threat-pulse 1s ease-in-out infinite;
}
.dark .cg2-threat-warning {
    background: rgba(244, 67, 54, 0.2);
}
@keyframes cg2-threat-pulse {
    0%, 100% { box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.4); }
    50% { box-shadow: 0 0 12px 4px rgba(244, 67, 54, 0.4); }
}
.cg2-threat-warning-header {
    font-size: 14px;
    font-weight: 800;
    color: #C62828;
    text-transform: uppercase;
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 6px;
}
.dark .cg2-threat-warning-header {
    color: #EF9A9A;
}
.cg2-threat-warning-item {
    font-size: 13px;
    color: #B71C1C;
    margin: 6px 0;
    padding: 8px 12px;
    background: rgba(255,255,255,0.5);
    border-radius: 6px;
}
.dark .cg2-threat-warning-item {
    background: rgba(0,0,0,0.3);
    color: #FFCDD2;
}
.cg2-threat-target-you {
    color: #C62828;
    font-weight: 700;
}
.cg2-threat-target-opp {
    color: #9C27B0;
    font-weight: 700;
}
.dark .cg2-threat-target-you {
    color: #EF5350;
}
.dark .cg2-threat-target-opp {
    color: #CE93D8;
}

/* ── Threat Response Phase UI ─────────────────────── */
.cg2-threat-response-panel {
    border-color: #F44336 !important;
    background: linear-gradient(135deg, rgba(255,235,235,0.98) 0%, rgba(255,245,240,0.98) 100%) !important;
}
.dark .cg2-threat-response-panel {
    background: linear-gradient(135deg, rgba(60,30,30,0.98) 0%, rgba(50,35,35,0.98) 100%) !important;
}
.cg2-threat-response-panel h2 {
    color: #C62828;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}
.cg2-threat-response-panel h2::before {
    content: "warning";
    font-family: "Material Symbols Outlined";
    font-size: 24px;
}
.dark .cg2-threat-response-panel h2 {
    color: #EF5350;
}
.cg2-threat-explain {
    color: #666;
    font-style: italic;
}
.dark .cg2-threat-explain {
    color: #aaa;
}

/* Threat encounter card layout (like initiative) */
.cg2-threat-encounter {
    margin: 20px 0;
}
.cg2-threat-card-wrap,
.cg2-defender-card-wrap {
    width: var(--card-init-width, 160px);
    height: var(--card-init-height, 220px);
}
.cg2-threat-encounter-card {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
    border: 3px solid #EF5350;
    border-radius: 12px;
    padding: 16px 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 16px rgba(244,67,54,0.3);
    animation: cg2-threat-pulse 1.5s ease-in-out infinite;
}
.dark .cg2-threat-encounter-card {
    background: linear-gradient(135deg, rgba(80,30,30,0.95) 0%, rgba(100,20,20,0.95) 100%);
}
.cg2-threat-encounter-icon {
    width: 60px;
    height: 60px;
    background: #C62828;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 12px;
}
.cg2-threat-encounter-icon .material-symbols-outlined {
    font-size: 36px;
    color: #fff;
}
.cg2-threat-encounter-name {
    font-size: 16px;
    font-weight: 700;
    color: #B71C1C;
    text-align: center;
    margin-bottom: 12px;
}
.dark .cg2-threat-encounter-name {
    color: #FFCDD2;
}
.cg2-threat-encounter-stats {
    display: flex;
    flex-direction: column;
    gap: 4px;
    margin-bottom: 8px;
}
.cg2-threat-stat-row {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 13px;
    font-weight: 600;
    color: #333;
}
.cg2-threat-stat-row .material-symbols-outlined {
    font-size: 16px;
    color: #C62828;
}
.dark .cg2-threat-stat-row {
    color: #eee;
}
.dark .cg2-threat-stat-row .material-symbols-outlined {
    color: #EF5350;
}
.cg2-threat-encounter-loot {
    font-size: 11px;
    color: #666;
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 4px 8px;
    background: rgba(0,0,0,0.05);
    border-radius: 12px;
}
.cg2-threat-encounter-loot .material-symbols-outlined {
    font-size: 14px;
}
.dark .cg2-threat-encounter-loot {
    color: #aaa;
    background: rgba(255,255,255,0.1);
}

/* VS indicator for threat */
.cg2-threat-vs {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    color: #C62828;
}
.cg2-threat-vs .material-symbols-outlined {
    font-size: 28px;
    animation: cg2-threat-pulse 1s ease-in-out infinite;
}
.dark .cg2-threat-vs {
    color: #EF5350;
}

/* Defender card */
.cg2-defender-card {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
    border: 3px solid #9E9E9E;
    border-radius: 12px;
    padding: 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
    box-shadow: 0 4px 16px rgba(0,0,0,0.15);
}
.cg2-defender-card.cg2-defender-you {
    border-color: #4CAF50;
    background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
}
.dark .cg2-defender-card {
    background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
}
.dark .cg2-defender-card.cg2-defender-you {
    background: linear-gradient(135deg, rgba(30,60,30,0.95) 0%, rgba(20,50,20,0.95) 100%);
    border-color: #66BB6A;
}
.cg2-defender-label {
    font-size: 16px;
    font-weight: 700;
    color: #333;
    margin-bottom: 8px;
}
.dark .cg2-defender-label {
    color: #eee;
}
.cg2-defender-stats {
    display: flex;
    gap: 12px;
    margin-bottom: 12px;
}
.cg2-defender-stat {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 12px;
    font-weight: 600;
    color: #555;
}
.cg2-defender-stat .material-symbols-outlined {
    font-size: 14px;
}
.dark .cg2-defender-stat {
    color: #bbb;
}
.cg2-defender-stack-area {
    flex: 1;
    width: 100%;
    background: rgba(0,0,0,0.05);
    border-radius: 8px;
    padding: 8px;
    display: flex;
    flex-direction: column;
}
.dark .cg2-defender-stack-area {
    background: rgba(255,255,255,0.05);
}
.cg2-defender-stack-label {
    font-size: 10px;
    font-weight: 600;
    color: #666;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 6px;
}
.dark .cg2-defender-stack-label {
    color: #999;
}
.cg2-defender-stack-cards {
    display: flex;
    flex-direction: column;
    gap: 4px;
}
.cg2-defender-stack-card {
    padding: 4px 8px;
    background: #4CAF50;
    color: #fff;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 600;
    text-align: center;
}
.cg2-defender-stack-empty {
    font-size: 10px;
    color: #999;
    font-style: italic;
    text-align: center;
}
.cg2-defender-ap {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 12px;
    font-weight: 600;
    color: #FF9800;
    margin-top: 8px;
    padding: 4px 10px;
    background: rgba(255,152,0,0.1);
    border-radius: 12px;
}
.cg2-defender-ap .material-symbols-outlined {
    font-size: 14px;
}

/* Threat actions */
.cg2-threat-actions {
    display: flex;
    gap: 12px;
    justify-content: center;
    margin-top: 16px;
}
.cg2-threat-waiting {
    font-size: 14px;
    color: #888;
    font-style: italic;
    padding: 12px;
    text-align: center;
}

/* Defense-eligible card highlight in hand */
.cg2-hand-card-wrapper.cg2-defense-eligible {
    cursor: pointer;
    animation: cg2-defense-pulse 1s ease-in-out infinite;
}
.cg2-hand-card-wrapper.cg2-defense-eligible:hover {
    transform: translateY(-8px) scale(1.05);
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
}
@keyframes cg2-defense-pulse {
    0%, 100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.4); }
    50% { box-shadow: 0 0 8px 3px rgba(76, 175, 80, 0.4); }
}

/* ── Initiative Countdown (overlay on cards) ──────── */
.cg2-init-cards {
    position: relative;
}
.cg2-init-countdown {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 10;
    pointer-events: none;
}
.cg2-countdown-number {
    width: 100px;
    height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 60px;
    font-weight: 900;
    color: #B8860B;
    background: linear-gradient(135deg, rgba(253,245,230,0.95) 0%, rgba(245,230,200,0.95) 100%);
    border-radius: 50%;
    border: 4px solid #B8860B;
    box-shadow: 0 8px 32px rgba(184,134,11,0.5), 0 0 60px rgba(184,134,11,0.3);
    animation: cg2-countdown-pulse 1s ease-in-out infinite;
}
.dark .cg2-countdown-number {
    background: linear-gradient(135deg, rgba(42,37,0,0.95) 0%, rgba(58,48,16,0.95) 100%);
}
@keyframes cg2-countdown-pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.15); }
}

/* ── D20 Dice Animation (inline SVG) ─────────────── */
.cg2-dice-container {
    display: flex;
    justify-content: center;
    margin: 12px 0;
    perspective: 400px;
}
.cg2-d20-wrap {
    width: 80px;
    height: 80px;
    filter: drop-shadow(0 4px 8px rgba(0,0,0,0.4));
}
.cg2-d20-svg {
    width: 100%;
    height: 100%;
}
.cg2-d20-wrap.cg2-d20-rolling {
    animation: cg2-dice-roll 0.1s ease-in-out infinite;
}
@keyframes cg2-dice-roll {
    0% { transform: rotateZ(0deg) scale(1); }
    25% { transform: rotateZ(12deg) scale(1.05); }
    50% { transform: rotateZ(0deg) scale(0.95); }
    75% { transform: rotateZ(-12deg) scale(1.05); }
    100% { transform: rotateZ(0deg) scale(1); }
}
.cg2-d20-wrap.cg2-d20-final {
    animation: cg2-dice-land 0.5s ease-out forwards;
}
@keyframes cg2-dice-land {
    0% { transform: scale(1.4) rotateZ(25deg); filter: drop-shadow(0 10px 16px rgba(0,0,0,0.5)); }
    30% { transform: scale(0.8) rotateZ(-10deg); }
    60% { transform: scale(1.15) rotateZ(5deg); }
    80% { transform: scale(0.95) rotateZ(-2deg); }
    100% { transform: scale(1) rotateZ(0deg); filter: drop-shadow(0 4px 8px rgba(0,0,0,0.4)); }
}
.cg2-d20-wrap.cg2-d20-winner {
    filter: drop-shadow(0 0 16px rgba(184,134,11,0.9)) drop-shadow(0 4px 8px rgba(0,0,0,0.4));
    animation: cg2-dice-winner 1s ease-in-out infinite;
}
@keyframes cg2-dice-winner {
    0%, 100% { filter: drop-shadow(0 0 12px rgba(184,134,11,0.8)) drop-shadow(0 4px 8px rgba(0,0,0,0.4)); }
    50% { filter: drop-shadow(0 0 28px rgba(255,215,0,1)) drop-shadow(0 4px 8px rgba(0,0,0,0.4)); }
}
.cg2-roll-breakdown {
    font-size: 13px;
    color: #555;
    margin-top: 8px;
}
.dark .cg2-roll-breakdown {
    color: #aaa;
}
.cg2-roll-breakdown strong {
    color: #B8860B;
    font-size: 15px;
}

/* ── Initiative Cards (Flippable) ─────────────────── */
.cg2-init-cards {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 24px;
    margin: 20px 0;
}
.cg2-init-card-wrap {
    width: var(--card-init-width);
    height: var(--card-init-height);
    cursor: pointer;
    perspective: 1000px;  /* Each card gets its own perspective context */
}
.cg2-init-card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
    transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}
.cg2-init-card-wrap.cg2-init-flipped .cg2-init-card-inner {
    transform: rotateY(180deg);
}
.cg2-init-card-wrap.cg2-init-winner-card {
    filter: drop-shadow(0 0 12px rgba(184,134,11,0.6));
}
.cg2-init-card-front,
.cg2-init-card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 16px rgba(0,0,0,0.2);
}
.cg2-init-card-front .cg2-card {
    width: 100% !important;
    height: 100% !important;
}
.cg2-init-card-back {
    transform: rotateY(180deg);
    transform-style: flat;  /* Prevent children from inheriting 3D context (fixes mirrored text) */
    background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
    border: 2px solid #B8860B;
    display: flex;
    align-items: center;
    justify-content: center;
}
.cg2-init-back-content {
    text-align: center;
    padding: 12px;
}
.cg2-init-back-label {
    font-size: 14px;
    font-weight: 700;
    color: #B8860B;
    margin-bottom: 12px;
    text-transform: uppercase;
    letter-spacing: 1px;
}
/* Initiative roll breakdown - visible on dark background */
.cg2-init-back-content .cg2-roll-breakdown {
    margin-top: 12px;
    padding: 8px 12px;
    background: rgba(0,0,0,0.5);
    border-radius: 8px;
    font-size: 13px;
    color: #fff;
    display: flex;
    align-items: baseline;
    justify-content: center;
    gap: 2px;
    flex-wrap: nowrap;
    white-space: nowrap;
}
.cg2-init-back-content .cg2-roll-breakdown .cg2-mod {
    color: #81c784;
    font-weight: 600;
}
.cg2-init-back-content .cg2-roll-breakdown strong {
    color: #B8860B;
    font-size: 16px;
}
.cg2-init-winner-badge {
    margin-top: 12px;
    padding: 6px 12px;
    background: linear-gradient(135deg, #B8860B 0%, #DAA520 100%);
    border-radius: 16px;
    color: #fff;
    font-size: 12px;
    font-weight: 700;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    animation: cg2-winner-glow 1s ease-in-out infinite alternate;
}
.cg2-init-winner-badge .material-symbols-outlined {
    font-size: 14px;
}
@keyframes cg2-winner-glow {
    from { box-shadow: 0 0 8px rgba(184,134,11,0.6); }
    to { box-shadow: 0 0 20px rgba(218,165,32,0.9); }
}
.cg2-init-card-wrap.cg2-init-loser-card {
    opacity: 0.8;
}
.cg2-init-loser-badge {
    margin-top: 12px;
    padding: 6px 12px;
    color: #888;
    font-size: 12px;
    font-weight: 700;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    visibility: hidden; /* Same height as winner but invisible */
}

/* ── Equip Phase ───────────────────────────────────── */
.cg2-equip-slots {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
    margin: 16px 0;
}
.cg2-equip-slot {
    width: 100px;
    padding: 10px;
    background: #f5f5f5;
    border: 1px solid #ddd;
    border-radius: 8px;
    text-align: center;
}
.dark .cg2-equip-slot {
    background: #2a2a2a;
    border-color: #444;
}
.cg2-equip-slot.cg2-slot-filled {
    background: #e8f5e9;
    border-color: #81c784;
}
.dark .cg2-equip-slot.cg2-slot-filled {
    background: #1b3a1b;
    border-color: #4a8;
}
.cg2-slot-label {
    font-size: 10px;
    font-weight: 700;
    color: #888;
    text-transform: uppercase;
    display: block;
    margin-bottom: 4px;
}
.cg2-slot-item {
    font-size: 11px;
    font-weight: 600;
    color: #2e7d32;
}
.cg2-slot-empty {
    font-size: 11px;
    color: #999;
    font-style: italic;
}

/* ── Placement Phase ───────────────────────────────── */
.cg2-turn-indicator {
    font-size: 14px;
    font-weight: 600;
    padding: 8px 16px;
    border-radius: 8px;
    display: inline-block;
}
.cg2-turn-indicator.cg2-your-turn {
    background: #e8f5e9;
    color: #2e7d32;
}
.dark .cg2-turn-indicator.cg2-your-turn {
    background: #1b3a1b;
    color: #8c8;
}
.cg2-ap-display {
    margin: 12px 0;
    font-size: 14px;
    color: #555;
}
.dark .cg2-ap-display {
    color: #aaa;
}
.cg2-placement-actions {
    display: flex;
    gap: 12px;
    justify-content: center;
    margin-top: 12px;
}
.cg2-placement-actions .cg2-btn {
    min-width: 100px;
}

/* ── Resolution Phase ──────────────────────────────── */
.cg2-resolving-info {
    font-size: 14px;
    padding: 12px;
    background: #f5f5f5;
    border-radius: 8px;
    margin: 12px 0;
}
.dark .cg2-resolving-info {
    background: #2a2a2a;
}
.cg2-owner-badge {
    font-weight: 600;
    color: #B8860B;
}
.cg2-action-name {
    font-weight: 700;
    color: #333;
}
.dark .cg2-action-name {
    color: #eee;
}
.cg2-empty-slot {
    color: #999;
    font-style: italic;
}

/* ── Cleanup Phase ─────────────────────────────────── */
.cg2-round-summary {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 12px;
    background: #f5f5f5;
    border-radius: 8px;
    margin: 12px 0;
    font-size: 14px;
}
.dark .cg2-round-summary {
    background: #2a2a2a;
}

/* ── Action Bar ────────────────────────────────────── */
.cg2-action-bar {
    background: rgba(255,255,255,0.95);
    border: 1px solid #e0d8c0;
    border-radius: 12px;
    padding: 16px;
    margin-top: auto;
    position: relative;  /* For combat overlay positioning */
    min-height: 320px;   /* Ensure space for combat overlay content */
}
.dark .cg2-action-bar {
    background: rgba(40,40,40,0.95);
    border-color: #444;
}
.cg2-action-bar-label {
    font-size: 12px;
    font-weight: 700;
    color: #888;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 12px;
}
.cg2-action-bar-track {
    display: flex;
    gap: 8px;
    overflow-x: auto;
    padding: 14px 0 8px; /* Top padding for sequence numbers */
}
.cg2-action-position {
    min-width: calc(var(--card-compact-width) + 24px);
    min-height: calc(var(--card-compact-height) + 50px);  /* Card + owner label + padding */
    padding: 8px;
    background: #f5f5f5;
    border: 2px solid #ddd;
    border-radius: 8px;
    text-align: center;
    position: relative;
    transition: all 0.2s;
    display: flex;
    flex-direction: column;
    align-items: center;
}
/* Compact cards in action bar positions */
.cg2-action-position .cg2-card.cg2-card-compact {
    width: var(--card-compact-width);
    height: var(--card-compact-height);
}
.dark .cg2-action-position {
    background: #2a2a2a;
    border-color: #444;
}
.cg2-action-position.cg2-player-pos {
    border-color: #81c784;
}
.cg2-action-position.cg2-opponent-pos {
    border-color: #ef9a9a;
}
.cg2-action-position.cg2-droppable {
    border-style: dashed;
    background: #e8f5e9;
}
.dark .cg2-action-position.cg2-droppable {
    background: #1b3a1b;
}
.cg2-action-position.cg2-active {
    border-color: #B8860B;
    box-shadow: 0 0 12px rgba(184,134,11,0.4);
    transform: scale(1.05);
}
.cg2-action-position.cg2-resolved {
    opacity: 0.6;
}
/* Locked positions (no AP remaining) */
.cg2-action-position.cg2-locked {
    background: rgba(128, 128, 128, 0.15);
    border-color: #aaa;
    border-style: dashed;
}
.dark .cg2-action-position.cg2-locked {
    background: rgba(80, 80, 80, 0.3);
    border-color: #555;
}
.cg2-pos-empty.cg2-pos-locked {
    color: #999;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
}
/* Threat positions (beginning threat from Nat 1) */
.cg2-action-position.cg2-threat-pos {
    border-color: #F44336;
    background: rgba(244, 67, 54, 0.1);
    border-width: 3px;
}
.dark .cg2-action-position.cg2-threat-pos {
    background: rgba(244, 67, 54, 0.15);
}
.cg2-action-position.cg2-threat-pos .cg2-pos-number {
    background: #F44336;
}
.cg2-action-position.cg2-threat-pos .cg2-pos-owner {
    color: #C62828;
    font-weight: 700;
}
/* Threat position content */
.cg2-pos-threat {
    padding: 6px 8px;
    background: rgba(244, 67, 54, 0.1);
    border: 1px solid rgba(244, 67, 54, 0.3);
    border-radius: 6px;
    text-align: center;
}
.cg2-threat-name {
    font-size: 11px;
    font-weight: 700;
    color: #C62828;
    margin-bottom: 4px;
}
.dark .cg2-threat-name {
    color: #EF9A9A;
}
.cg2-threat-stats {
    display: flex;
    gap: 4px;
    justify-content: center;
    font-size: 9px;
    color: #666;
}
.cg2-threat-stats span {
    padding: 2px 4px;
    background: rgba(0,0,0,0.05);
    border-radius: 3px;
}
.dark .cg2-threat-stats span {
    background: rgba(255,255,255,0.1);
    color: #aaa;
}
.cg2-threat-target {
    font-size: 10px;
    margin-top: 4px;
    color: #888;
}
.cg2-pos-number {
    position: absolute;
    top: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 20px;
    height: 20px;
    line-height: 20px;
    background: #B8860B;
    color: #fff;
    border-radius: 50%;
    font-size: 11px;
    font-weight: 700;
}
.cg2-pos-owner {
    font-size: 10px;
    color: #888;
    margin-bottom: 6px;
}
.cg2-pos-card {
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 6px;
    padding: 8px;
}
.dark .cg2-pos-card {
    background: #333;
    border-color: #555;
}
.cg2-pos-card-name {
    font-size: 12px;
    font-weight: 700;
    color: #333;
}
.dark .cg2-pos-card-name {
    color: #eee;
}
.cg2-pos-mods {
    font-size: 10px;
    color: #888;
    margin-top: 4px;
}
.cg2-pos-empty {
    font-size: 11px;
    color: #999;
    font-style: italic;
    padding: 8px;
}
.cg2-resolve-marker {
    position: absolute;
    bottom: -16px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 16px;
    color: #B8860B;
    animation: cg2-pulse 0.5s ease-in-out infinite alternate;
}
@keyframes cg2-pulse {
    from { transform: translateX(-50%) scale(1); }
    to { transform: translateX(-50%) scale(1.3); }
}

/* ── Hand Tray ─────────────────────────────────────── */
.cg2-hand-tray {
    background: rgba(255,255,255,0.95);
    border-top: 1px solid #e0d8c0;
    padding: 12px 16px;
    position: relative;
    z-index: 5; /* Above game area cards */
}
.dark .cg2-hand-tray {
    background: rgba(30,30,30,0.95);
    border-top-color: #444;
}
.cg2-hand-header {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 16px;
    margin-bottom: 10px;
}
.cg2-hand-label {
    font-size: 14px;
    font-weight: 700;
    color: #B8860B;
}
.cg2-hand-tabs {
    display: flex;
    gap: 4px;
}
.cg2-hand-tab {
    padding: 4px 12px;
    font-size: 12px;
    font-weight: 600;
    color: #888;
    cursor: pointer;
    border-radius: 4px;
    transition: all 0.15s;
}
.cg2-hand-tab:hover {
    background: rgba(184,134,11,0.1);
    color: #555;
}
.cg2-hand-tab.cg2-tab-active {
    background: #B8860B;
    color: #fff;
}
.cg2-hand-cards {
    display: flex;
    gap: 16px;
    overflow-x: auto;
    padding: 8px 4px 12px;
    align-items: flex-end;
}
.cg2-hand-card-wrapper {
    position: relative; /* Anchor for absolute positioned art thumbnails */
    cursor: grab;
    transition: all 0.2s;
    user-select: none;
    flex-shrink: 0;
}
.cg2-hand-card-wrapper:hover {
    transform: translateY(-12px) scale(1.05);
    z-index: 10;
}
.cg2-hand-card-wrapper:hover .cg2-card {
    box-shadow: 0 12px 24px rgba(0,0,0,0.3);
}
.cg2-hand-card-wrapper:active {
    cursor: grabbing;
}

/* Legacy simple card styles (can be removed if unused) */
.cg2-hand-card {
    min-width: 80px;
    padding: 10px 12px;
    background: #fff;
    border: 2px solid #ddd;
    border-radius: 8px;
    cursor: grab;
    transition: all 0.15s;
    user-select: none;
}
.dark .cg2-hand-card {
    background: #2a2a2a;
    border-color: #444;
}
.cg2-hand-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}
.cg2-hand-card:active {
    cursor: grabbing;
}
.cg2-hand-card.cg2-card-action {
    border-color: #C62828;
}
.cg2-hand-card.cg2-card-talk {
    border-color: #1565C0;
}
.cg2-hand-card.cg2-card-skill {
    border-color: #E65100;
}
.cg2-hand-card.cg2-card-magic {
    border-color: #00695C;
}
.cg2-hc-type {
    font-size: 9px;
    font-weight: 700;
    text-transform: uppercase;
    color: #888;
    margin-bottom: 4px;
}
.cg2-hc-name {
    font-size: 12px;
    font-weight: 700;
    color: #333;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.dark .cg2-hc-name {
    color: #eee;
}
.cg2-hc-cost {
    font-size: 10px;
    color: #1E88E5;
    font-weight: 600;
    margin-top: 4px;
}
.cg2-hand-empty {
    font-size: 12px;
    color: #999;
    font-style: italic;
    padding: 12px;
}

/* ── Game Error State ──────────────────────────────── */
.cg2-game-error {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px;
    text-align: center;
}
.cg2-game-error h2 {
    color: #c62828;
    margin-bottom: 12px;
}
.cg2-game-error p {
    color: #666;
    margin-bottom: 20px;
}

/* ── Character Selection ───────────────────────────── */
.cg2-char-select-container {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
}
.cg2-char-select-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
    margin: 20px 0;
}
.cg2-char-select-wrapper {
    cursor: pointer;
    transition: all 0.2s;
}
.cg2-char-select-wrapper:hover {
    transform: translateY(-8px) scale(1.05);
}
.cg2-char-select-wrapper:hover .cg2-card {
    box-shadow: 0 8px 24px rgba(184,134,11,0.4);
}
.cg2-char-select-wrapper {
    position: relative;
}
.cg2-char-select-wrapper .cg2-char-badge {
    position: absolute;
    top: 8px;
    z-index: 10;
    width: 28px; height: 28px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}
.cg2-char-select-wrapper .cg2-char-badge .material-symbols-outlined {
    font-size: 20px;
}
.cg2-char-best {
    right: 8px;
    background: linear-gradient(135deg, #FFD700, #B8860B);
    color: #fff;
}
.cg2-char-worst {
    left: 8px;
    background: linear-gradient(135deg, #e53935, #b71c1c);
    color: #fff;
}
.cg2-char-select-card {
    width: 160px;
    padding: 16px;
    background: #fff;
    border: 3px solid #ddd;
    border-radius: 12px;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
}
.dark .cg2-char-select-card {
    background: #2a2a2a;
    border-color: #444;
}
.cg2-char-select-card:hover {
    border-color: #B8860B;
    transform: translateY(-4px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
}
.cg2-char-select-card.cg2-char-select-active {
    border-color: #B8860B;
    background: #FDF5E6;
    box-shadow: 0 0 0 3px rgba(184,134,11,0.3);
}
.dark .cg2-char-select-card.cg2-char-select-active {
    background: #2a2500;
}
.cg2-char-select-portrait {
    width: 80px;
    height: 80px;
    margin: 0 auto 12px;
    border-radius: 50%;
    border: 3px solid #B8860B;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f5f0e6;
}
.cg2-char-select-portrait img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.cg2-char-select-portrait .material-symbols-outlined {
    font-size: 40px;
    color: #B8860B;
}
.cg2-char-select-name {
    font-size: 15px;
    font-weight: 700;
    color: #333;
    margin-bottom: 4px;
}
.dark .cg2-char-select-name {
    color: #eee;
}
.cg2-char-select-meta {
    font-size: 11px;
    color: #888;
    margin-bottom: 8px;
}
.cg2-char-select-stats {
    display: flex;
    justify-content: center;
    gap: 8px;
    font-size: 10px;
    color: #666;
}
.dark .cg2-char-select-stats {
    color: #aaa;
}
.cg2-char-select-stats span {
    padding: 2px 6px;
    background: #f0f0f0;
    border-radius: 4px;
}
.dark .cg2-char-select-stats span {
    background: #333;
}
.cg2-char-select-check {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 24px;
    height: 24px;
    line-height: 24px;
    background: #B8860B;
    color: #fff;
    border-radius: 50%;
    font-size: 14px;
    font-weight: 700;
}

/* ── LLM Status Indicator ─────────────────────────── */
.cg2-llm-status {
    margin: 16px 0;
    padding: 10px 16px;
    border-radius: 8px;
    font-size: 13px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
}
.cg2-llm-status .material-symbols-outlined {
    font-size: 18px;
    vertical-align: middle;
}
.cg2-llm-checking {
    color: #888;
    background: #f5f5f5;
    padding: 8px 12px;
    border-radius: 6px;
}
.dark .cg2-llm-checking {
    background: #333;
    color: #aaa;
}
.cg2-llm-online {
    color: #2e7d32;
    background: #e8f5e9;
    padding: 8px 12px;
    border-radius: 6px;
}
.dark .cg2-llm-online {
    background: #1b3a1b;
    color: #8c8;
}
.cg2-llm-offline {
    color: #c62828;
    background: #ffebee;
    padding: 8px 12px;
    border-radius: 6px;
}
.dark .cg2-llm-offline {
    background: #3a1b1b;
    color: #f88;
}
/* ═══════════════════════════════════════════════════════
   Phase 5 — Combat Resolution Styles
   ═══════════════════════════════════════════════════════ */

/* ── Combat Display Container ─────────────────────────── */
.cg2-combat-display {
    padding: 20px;
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    border-radius: 12px;
    margin: 16px 0;
    border: 2px solid #B8860B;
}

/* ── Combat/Action Overlay (modal dialog) ─────────── */
.cg2-combat-overlay,
.cg2-non-combat-overlay {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 640px;
    max-width: 95vw;
    height: 520px;  /* Fixed height to prevent jumping */
    background:
        linear-gradient(135deg, rgba(184,134,11,0.08) 0%, transparent 50%),  /* Corner glow */
        linear-gradient(225deg, rgba(184,134,11,0.05) 0%, transparent 40%),  /* Opposite corner */
        linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f1525 100%);      /* Base gradient */
    border-radius: 16px;
    padding: 32px 40px 40px;
    z-index: 500;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    border: 3px solid #B8860B;
    box-shadow:
        0 12px 48px rgba(0,0,0,0.6),
        0 0 0 9999px rgba(0,0,0,0.5),
        inset 0 1px 0 rgba(255,255,255,0.05),     /* Inner highlight */
        inset 0 -1px 0 rgba(0,0,0,0.2);            /* Inner shadow */
    overflow: hidden;
}

/* Decorative corner flourishes */
.cg2-combat-overlay::before,
.cg2-non-combat-overlay::before {
    content: "";
    position: absolute;
    top: 8px;
    left: 8px;
    right: 8px;
    bottom: 8px;
    border: 1px solid rgba(184,134,11,0.2);
    border-radius: 12px;
    pointer-events: none;
}

/* Combat content wrapper - stable dimensions */
.cg2-combat-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    flex: 1;
    min-height: 0;  /* Allow flex shrink */
}

/* Non-combat uses same style as combat for consistency */

/* ── Action Step Label ─────────────────────────────────── */
.cg2-action-step-label {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 16px;
}
.cg2-step-number {
    font-size: 13px;
    color: #aaa;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 4px;
}
.cg2-step-action {
    font-size: 26px;
    font-weight: 800;
    color: #B8860B;
    text-shadow: 0 2px 4px rgba(0,0,0,0.5);
    font-style: italic;
}

/* ── Combat Header (Attacker vs Defender) ─────────────── */
.cg2-combat-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    margin-bottom: 20px;
    font-size: 16px;
}
.cg2-combatant {
    font-weight: 700;
    padding: 8px 16px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    text-shadow: 0 1px 2px rgba(0,0,0,0.3);
}
.cg2-attacker {
    background: linear-gradient(135deg, #c62828 0%, #e53935 50%, #c62828 100%);
    color: #fff;
    border: 1px solid rgba(255,255,255,0.2);
}
.cg2-defender {
    background: linear-gradient(135deg, #1565c0 0%, #1e88e5 50%, #1565c0 100%);
    color: #fff;
    border: 1px solid rgba(255,255,255,0.2);
}
.cg2-combat-vs {
    color: #B8860B;
    font-weight: 600;
    font-style: italic;
}

/* ── Combat Dice Row ──────────────────────────────────── */
.cg2-combat-dice-row {
    display: flex;
    align-items: flex-start;
    justify-content: center;
    gap: 20px;
    margin: 16px 0;
    flex-shrink: 0;
}
.cg2-combat-roll-card {
    padding: 16px 24px;
    background:
        linear-gradient(180deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.02) 100%);
    border: 1px solid rgba(184,134,11,0.3);
    border-radius: 12px;
    text-align: center;
    min-width: 180px;
    min-height: 180px;  /* Fixed height prevents jumping during roll phases */
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    box-shadow:
        0 4px 12px rgba(0,0,0,0.3),
        inset 0 1px 0 rgba(255,255,255,0.1);
    position: relative;
}
.cg2-roll-label {
    font-size: 12px;
    font-weight: 700;
    color: #aaa;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 12px;
}
.cg2-combat-vs-divider {
    font-size: 20px;
    font-weight: 800;
    color: #B8860B;
    align-self: center;
    margin-top: 20px;
}

/* ── Attack/Defense Dice Colors ───────────────────────── */
/* Color variants for combat dice (tint the SVG) */
.cg2-d20-attack {
    filter: drop-shadow(0 4px 6px rgba(0,0,0,0.4)) sepia(1) saturate(5) hue-rotate(-50deg) brightness(0.9);
}
.cg2-d20-defense {
    /* Default blue SVG is already good for defense, just enhance */
    filter: drop-shadow(0 4px 6px rgba(0,0,0,0.4)) brightness(1.1);
}

/* ── Combat Roll Breakdown ────────────────────────────── */
.cg2-combat-roll-card .cg2-roll-breakdown {
    font-size: 12px;
    color: #ccc;
    margin-top: 12px;
    line-height: 1.6;
}
.cg2-combat-roll-card .cg2-roll-breakdown strong {
    color: #B8860B;
    font-size: 16px;
}
.cg2-combat-roll-card .cg2-mod {
    color: #81c784;
    font-weight: 600;
}
.cg2-combat-roll-card .cg2-mod-atk {
    color: #ef9a9a;
}
.cg2-combat-roll-card .cg2-mod-def {
    color: #64b5f6;
}
.cg2-combat-roll-card .cg2-mod-skill {
    color: #ffcc80;
}
.cg2-combat-roll-card .cg2-mod-parry {
    color: #ce93d8;
}
.cg2-combat-roll-card .cg2-mod-status {
    color: #80deea;
}

/* ── Combat Outcome Area (fixed container) ─────────────── */
.cg2-outcome-area {
    width: 100%;
    min-height: 140px;  /* Reserved space for outcome + damage */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    margin-top: 12px;
}

/* ── Combat Outcome ───────────────────────────────────── */
.cg2-combat-outcome {
    text-align: center;
    padding: 20px 32px;
    background:
        linear-gradient(180deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.2) 100%);
    border: 1px solid rgba(184,134,11,0.3);
    border-radius: 12px;
    min-width: 320px;
    animation: cg2-outcome-appear 0.3s ease-out;
    box-shadow: 0 4px 16px rgba(0,0,0,0.3);
}

@keyframes cg2-outcome-appear {
    from { opacity: 0; transform: translateY(-10px) scale(0.95); }
    to { opacity: 1; transform: translateY(0) scale(1); }
}

/* Outcome placeholder during rolling */
.cg2-outcome-pending {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 20px 32px;
    background: rgba(0,0,0,0.2);
    border: 1px dashed rgba(184,134,11,0.3);
    border-radius: 12px;
    min-width: 320px;
    color: #B8860B;
    font-size: 16px;
    font-style: italic;
    font-style: italic;
}
.cg2-outcome-label {
    font-size: 22px;
    font-weight: 800;
    margin-bottom: 8px;
}
.cg2-outcome-hit {
    color: #ff5252;
    text-shadow: 0 0 10px rgba(255,82,82,0.5);
}
.cg2-outcome-miss {
    color: #64b5f6;
}
.cg2-outcome-counter {
    color: #ffa726;
    text-shadow: 0 0 10px rgba(255,167,38,0.5);
}
.cg2-outcome-text {
    display: inline;
}
.cg2-outcome-diff {
    font-size: 14px;
    opacity: 0.8;
}
.cg2-outcome-effect {
    font-size: 13px;
    color: #aaa;
    font-style: italic;
    margin-top: 4px;
}

/* ── Damage Display ───────────────────────────────────── */
.cg2-damage-display {
    margin-top: 12px;
    font-size: 15px;
}
.cg2-damage-number {
    font-weight: 800;
    font-size: 18px;
}
.cg2-damage-dealt {
    color: #ff5252;
    text-shadow: 0 0 8px rgba(255,82,82,0.4);
}
.cg2-damage-self {
    color: #ffa726;
}
.cg2-damage-target {
    color: #bbb;
}

/* ── Critical Effects Display ─────────────────────────── */
.cg2-critical-effects {
    margin-top: 16px;
    padding: 12px;
    background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,140,0,0.15));
    border: 1px solid rgba(255,215,0,0.4);
    border-radius: 8px;
    animation: cg2-critical-glow 1.5s ease-in-out infinite alternate;
}
@keyframes cg2-critical-glow {
    from { box-shadow: 0 0 8px rgba(255,215,0,0.3); }
    to { box-shadow: 0 0 16px rgba(255,140,0,0.5); }
}
.cg2-critical-effect {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 0;
    font-size: 14px;
    font-weight: 600;
}
.cg2-critical-effect .material-symbols-outlined {
    font-size: 18px;
}
.cg2-item-dropped {
    color: #ffa726;
}
.cg2-item-dropped .material-symbols-outlined {
    color: #ffb74d;
}
.cg2-attacker-stunned {
    color: #9575cd;
}
.cg2-attacker-stunned .material-symbols-outlined {
    color: #b39ddb;
}

/* ── Critical Reward Card ─────────────────────────────── */
.cg2-reward-earned {
    color: #4fc3f7;
    animation: cg2-reward-glow 1s ease-in-out infinite alternate;
}
.cg2-reward-earned .material-symbols-outlined {
    color: #81d4fa;
}
@keyframes cg2-reward-glow {
    from { text-shadow: 0 0 4px rgba(79, 195, 247, 0.3); }
    to { text-shadow: 0 0 12px rgba(79, 195, 247, 0.7); }
}
.cg2-reward-rarity {
    font-size: 11px;
    font-weight: 400;
    margin-left: 4px;
    opacity: 0.8;
}
.cg2-rarity-common { color: #9e9e9e; }
.cg2-rarity-uncommon { color: #4caf50; }
.cg2-rarity-rare { color: #2196f3; }
.cg2-rarity-epic { color: #9c27b0; }
.cg2-rarity-legendary { color: #ff9800; }

/* ── Resolving Action Indicator ───────────────────────── */
.cg2-resolving-action {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 40px 48px;
    margin: 40px 0;
    color: #ccc;
    font-size: 20px;
    background: rgba(255,255,255,0.05);
    border-radius: 12px;
    min-width: 320px;
}
.cg2-resolving-action .material-symbols-outlined {
    font-size: 32px;
    color: #B8860B;
}

/* ── Resolution Progress ──────────────────────────────── */
.cg2-resolution-progress {
    font-size: 15px;
    color: #aaa;
    text-align: center;
    margin-top: 24px;
    font-style: italic;
}

/* ── Non-combat content centering ─────────────────────── */
.cg2-non-combat-overlay .cg2-combat-content {
    justify-content: center;
    flex: 1;
}

/* ── Auto-Advance Hint ───────────────────────────────── */
.cg2-auto-advance-hint {
    font-size: 12px;
    color: #666;
    font-style: italic;
    text-align: center;
    margin-top: 8px;
    padding: 8px;
    background: rgba(0,0,0,0.05);
    border-radius: 4px;
}
.dark .cg2-auto-advance-hint {
    background: rgba(255,255,255,0.05);
    color: #999;
}

/* ── Owner Badge Colors ───────────────────────────────── */
.cg2-owner-player {
    color: #81c784 !important;
}
.cg2-owner-opponent {
    color: #ef9a9a !important;
}

/* ── Game Over Overlay ─────────────────────────────────── */
.cg2-game-over-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.75);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    animation: cg2-fade-in 0.3s ease-out;
}

.cg2-game-over-panel {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    border: 3px solid #B8860B;
    border-radius: 16px;
    padding: 40px 60px;
    text-align: center;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5), 0 0 60px rgba(184, 134, 11, 0.2);
    max-width: 90vw;
}

/* Legacy - keep for backwards compat */
.cg2-game-over {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px;
    text-align: center;
}
.cg2-game-over-title {
    font-size: 32px;
    font-weight: 800;
    margin-bottom: 8px;
}
.cg2-game-over-title.cg2-victory {
    color: #B8860B;
    text-shadow: 0 0 20px rgba(184,134,11,0.5);
}
.cg2-game-over-title.cg2-defeat {
    color: #c62828;
}
.cg2-game-over-subtitle {
    font-size: 16px;
    color: #888;
    margin-bottom: 24px;
}
.cg2-game-over-stats {
    display: flex;
    gap: 32px;
    margin: 20px 0;
}
.cg2-game-over-stat {
    text-align: center;
}
.cg2-game-over-stat-label {
    font-size: 12px;
    color: #888;
    text-transform: uppercase;
    letter-spacing: 1px;
}
.cg2-game-over-stat-value {
    font-size: 28px;
    font-weight: 700;
    color: #B8860B;
}
.cg2-game-over-actions {
    display: flex;
    gap: 12px;
    margin-top: 24px;
}

/* ── Cleanup Phase ───────────────────────────────────── */
.cg2-cleanup-panel {
    max-width: 400px;
    margin: 20px auto;
}
.cg2-round-winner {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 8px;
}
.cg2-round-winner.cg2-win {
    color: #4caf50;
}
.cg2-round-winner.cg2-lose {
    color: #ef5350;
}
.cg2-round-points {
    font-size: 13px;
    color: #666;
    margin-bottom: 12px;
}
.dark .cg2-round-points {
    color: #aaa;
}
/* Round recovery display */
.cg2-round-recovery {
    border-top: 1px solid rgba(0,0,0,0.1);
    padding-top: 12px;
    margin-top: 12px;
}
.dark .cg2-round-recovery {
    border-color: rgba(255,255,255,0.1);
}
.cg2-recovery-row {
    display: flex;
    gap: 8px;
    align-items: center;
    justify-content: center;
    font-size: 13px;
    margin-bottom: 4px;
}
.cg2-recovery-label {
    font-weight: 600;
    color: #888;
    min-width: 55px;
    text-align: right;
}
.cg2-recovery-row .cg2-winner {
    color: #4caf50;
    font-weight: 600;
}
/* Legacy HP recovery styles */
.cg2-hp-recovery {
    border-top: 1px solid rgba(0,0,0,0.1);
    padding-top: 12px;
    margin-top: 12px;
}
.dark .cg2-hp-recovery {
    border-color: rgba(255,255,255,0.1);
}
.cg2-hp-recovery > div:first-child {
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #888;
    margin-bottom: 4px;
}
.cg2-recovery-detail {
    font-size: 14px;
    color: #666;
}
.dark .cg2-recovery-detail {
    color: #aaa;
}
.cg2-recovery-detail .cg2-winner {
    color: #4caf50;
    font-weight: 600;
}
.cg2-pot-claimed {
    margin-top: 12px;
    padding: 8px 12px;
    background: rgba(184,134,11,0.15);
    border-radius: 6px;
    color: #B8860B;
    font-weight: 600;
    font-size: 13px;
}
.cg2-pot-carries {
    margin-top: 8px;
    font-size: 12px;
    color: #888;
    font-style: italic;
}

/* ── Hoarding Prevention Notices ─────────────────────── */
.cg2-lethargy-notice {
    margin-top: 12px;
    padding: 10px 14px;
    background: rgba(156, 39, 176, 0.1);
    border: 1px solid rgba(156, 39, 176, 0.3);
    border-radius: 8px;
}
.dark .cg2-lethargy-notice {
    background: rgba(156, 39, 176, 0.15);
    border-color: rgba(156, 39, 176, 0.4);
}
.cg2-lethargy-title {
    font-size: 12px;
    font-weight: 700;
    color: #9C27B0;
    margin-bottom: 6px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.cg2-lethargy-item {
    font-size: 12px;
    color: #7B1FA2;
    margin: 4px 0;
}
.dark .cg2-lethargy-item {
    color: #CE93D8;
}
.cg2-lethargy-player {
    color: #7B1FA2;
}
.cg2-lethargy-opponent {
    color: #9C27B0;
}

/* ── Scenario Card (End Threats) ─────────────────────── */
.cg2-scenario-card {
    margin-top: 12px;
    padding: 10px 14px;
    background: rgba(33, 150, 243, 0.1);
    border: 1px solid rgba(33, 150, 243, 0.3);
    border-radius: 8px;
}
.cg2-scenario-card:has(.cg2-end-threat) {
    background: rgba(244, 67, 54, 0.1);
    border-color: rgba(244, 67, 54, 0.3);
}
.dark .cg2-scenario-card {
    background: rgba(33, 150, 243, 0.15);
    border-color: rgba(33, 150, 243, 0.4);
}
.cg2-scenario-title {
    font-size: 12px;
    font-weight: 700;
    color: #1976D2;
    margin-bottom: 6px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.cg2-scenario-card:has(.cg2-end-threat) .cg2-scenario-title {
    color: #c62828;
}
.cg2-scenario-desc {
    font-size: 12px;
    color: #555;
    font-style: italic;
    margin-bottom: 8px;
}
.dark .cg2-scenario-desc {
    color: #aaa;
}
.cg2-end-threat {
    font-size: 13px;
    color: #c62828;
    padding-top: 8px;
    border-top: 1px solid rgba(198, 40, 40, 0.2);
}
.cg2-end-threat-pending {
    animation: cg2-threat-pulse 1.5s ease-in-out infinite;
    padding: 8px 12px;
    background: rgba(244, 67, 54, 0.1);
    border-radius: 6px;
    border-top: none;
    margin-top: 8px;
}
.dark .cg2-end-threat-pending {
    background: rgba(244, 67, 54, 0.2);
}
.cg2-btn-threat {
    background: linear-gradient(135deg, #EF5350 0%, #C62828 100%) !important;
    animation: cg2-threat-pulse 1.5s ease-in-out infinite;
}
.cg2-btn-threat:hover {
    background: linear-gradient(135deg, #F44336 0%, #B71C1C 100%) !important;
}

.cg2-exhausted-notice {
    margin-top: 8px;
    padding: 8px 12px;
    background: rgba(244, 67, 54, 0.1);
    border: 1px solid rgba(244, 67, 54, 0.3);
    border-radius: 6px;
    font-size: 11px;
    color: #C62828;
}
.dark .cg2-exhausted-notice {
    background: rgba(244, 67, 54, 0.15);
    color: #EF9A9A;
}

/* ── Card Preview Overlay (with flip) ─────────────────── */
.cg2-card-preview-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.85);
    z-index: 9999;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
    cursor: pointer;
}
.cg2-card-preview-container {
    cursor: pointer;
}
.cg2-card-preview-container .cg2-card {
    box-shadow: 0 8px 32px rgba(0,0,0,0.5);
}
.cg2-card-preview-container .cg2-card.cg2-card-full {
    width: var(--card-preview-width);
    height: var(--card-preview-height);
    font-size: 12px;
}
/* Flip container */
.cg2-preview-flipper {
    perspective: 1000px;
    width: var(--card-preview-width);
    height: var(--card-preview-height);
    position: relative;
}
.cg2-preview-face {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    transition: transform 0.6s ease;
}
.cg2-preview-front {
    transform: rotateY(0deg);
}
.cg2-preview-back-face {
    transform: rotateY(180deg);
}
.cg2-preview-flipper.cg2-flipped .cg2-preview-front {
    transform: rotateY(-180deg);
}
.cg2-preview-flipper.cg2-flipped .cg2-preview-back-face {
    transform: rotateY(0deg);
}
.cg2-preview-back {
    background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
    border: 2px solid #444;
    border-radius: 12px;
    overflow: hidden;
}
.cg2-preview-back-art {
    max-width: 90%;
    max-height: 90%;
    border-radius: 8px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.5);
    object-fit: contain;
}
.cg2-card-back-design {
    color: #666;
}
.cg2-preview-hint {
    color: #888;
    font-size: 12px;
    font-style: italic;
}
.cg2-preview-close {
    position: absolute;
    top: 16px;
    right: 16px;
    color: #fff;
    font-size: 32px;
    cursor: pointer;
    opacity: 0.8;
    transition: opacity 0.15s;
}
.cg2-preview-close:hover {
    opacity: 1;
}

/* ── Action Bar Card Thumbnails (Stacked) ─────────────── */
.cg2-pos-stack {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 2px;
    min-height: 60px;
}
.cg2-pos-core-card {
    cursor: pointer;
    transition: transform 0.15s, box-shadow 0.15s;
    position: relative;
    z-index: 1;
}
.cg2-pos-core-card:hover {
    transform: scale(1.08);
    z-index: 10;
}
/* Stacked modifiers behind core card */
.cg2-pos-modifiers {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
}
.cg2-pos-mod-thumb {
    width: 38px;
    height: 52px;
    border-radius: 4px;
    border: 2px solid;
    font-size: 10px;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.15s, z-index 0s;
    background: #fff;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    margin-top: -46px; /* Stack behind/above */
}
.cg2-pos-mod-thumb:first-child {
    margin-top: 0;
}
.dark .cg2-pos-mod-thumb {
    background: #2a2a2a;
}
.cg2-pos-mod-thumb:hover {
    transform: translateY(-8px) scale(1.15);
    z-index: 20;
}
.cg2-pos-mod-thumb.cg2-mod-skill {
    border-color: #E65100;
    color: #E65100;
    background: linear-gradient(135deg, #FFF3E0, #FFE0B2);
}
.dark .cg2-pos-mod-thumb.cg2-mod-skill {
    background: linear-gradient(135deg, #3d2600, #4a3000);
}
.cg2-pos-mod-thumb.cg2-mod-magic {
    border-color: #00695C;
    color: #00695C;
    background: linear-gradient(135deg, #E0F2F1, #B2DFDB);
}
.dark .cg2-pos-mod-thumb.cg2-mod-magic {
    background: linear-gradient(135deg, #00302b, #004d40);
}
.cg2-pos-mod-thumb.cg2-mod-item {
    border-color: #5D4037;
    color: #5D4037;
    background: linear-gradient(135deg, #EFEBE9, #D7CCC8);
}
.dark .cg2-pos-mod-thumb.cg2-mod-item {
    background: linear-gradient(135deg, #2e2420, #3e322c);
}
/* Stack count badge */
.cg2-stack-count {
    position: absolute;
    top: -6px;
    right: -6px;
    background: #B8860B;
    color: #fff;
    font-size: 10px;
    font-weight: 700;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    z-index: 5;
}
/* Remove button on placed cards */
.cg2-pos-remove-btn {
    position: absolute;
    top: -8px;
    left: -8px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    border: none;
    background: #e53935;
    color: #fff;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    opacity: 0;
    transition: opacity 0.15s, transform 0.15s;
    z-index: 10;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
}
.cg2-pos-remove-btn .material-symbols-outlined {
    font-size: 14px;
}
.cg2-pos-core-card:hover .cg2-pos-remove-btn {
    opacity: 1;
}
.cg2-pos-remove-btn:hover {
    transform: scale(1.15);
    background: #c62828;
}
/* Modifier list below core card */
.cg2-pos-modifiers-list {
    display: flex;
    flex-direction: column;
    gap: 2px;
    margin-top: 4px;
    max-width: 100%;
}
.cg2-pos-mod-item {
    font-size: 9px;
    padding: 2px 4px;
    border-radius: 3px;
    cursor: pointer;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: flex;
    align-items: center;
    gap: 2px;
    transition: background 0.15s;
}
.cg2-pos-mod-item:hover {
    filter: brightness(1.1);
}
.cg2-pos-mod-item.cg2-mod-skill {
    background: linear-gradient(90deg, #FFF3E0, #FFE0B2);
    color: #E65100;
    border-left: 2px solid #E65100;
}
.cg2-pos-mod-item.cg2-mod-magic {
    background: linear-gradient(90deg, #E0F2F1, #B2DFDB);
    color: #00695C;
    border-left: 2px solid #00695C;
}
.cg2-pos-mod-item.cg2-mod-item {
    background: linear-gradient(90deg, #EFEBE9, #D7CCC8);
    color: #5D4037;
    border-left: 2px solid #5D4037;
}
.dark .cg2-pos-mod-item.cg2-mod-skill {
    background: linear-gradient(90deg, #3d2600, #4a3000);
}
.dark .cg2-pos-mod-item.cg2-mod-magic {
    background: linear-gradient(90deg, #00302b, #004d40);
}
.dark .cg2-pos-mod-item.cg2-mod-item {
    background: linear-gradient(90deg, #2e2420, #3e322c);
}

/* ── Hand Card Art Thumbnail ──────────────────────────── */
.cg2-card-art-thumb {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80%;
    height: 60%;
    object-fit: cover;
    border-radius: 4px;
    opacity: 0.9;
    pointer-events: none;
    z-index: 1;
}
.cg2-card.cg2-card-compact .cg2-card-art-thumb {
    height: 50%;
}
.cg2-card.cg2-card-mini .cg2-card-art-thumb {
    height: 70%;
    width: 90%;
}

/* ═══════════════════════════════════════════════════════
   Phase 8: Talk Card Chat UI
   ═══════════════════════════════════════════════════════ */

.cg2-chat-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    animation: cg2-fade-in 0.2s ease-out;
}

.cg2-chat-panel {
    background: var(--card-talk-bg, #E3F2FD);
    border: 3px solid var(--card-talk-color, #1565C0);
    border-radius: 12px;
    width: 450px;
    max-width: 90vw;
    max-height: 70vh;
    display: flex;
    flex-direction: column;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    overflow: hidden;
}

.cg2-chat-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    background: var(--card-talk-color, #1565C0);
    color: white;
}

.cg2-chat-portrait {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    border: 2px solid white;
    object-fit: cover;
}

.cg2-chat-portrait-icon {
    width: 48px;
    height: 48px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
}

.cg2-chat-npc-name {
    flex: 1;
    font-weight: 600;
    font-size: 1.1em;
}

.cg2-chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
    min-height: 200px;
    max-height: 300px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    background: white;
}

.cg2-chat-hint {
    color: #666;
    font-style: italic;
    text-align: center;
    padding: 40px 20px;
}

.cg2-chat-message {
    display: flex;
    flex-direction: column;
    gap: 4px;
    max-width: 85%;
}

.cg2-chat-player {
    align-self: flex-end;
}

.cg2-chat-npc {
    align-self: flex-start;
}

.cg2-chat-speaker {
    font-size: 0.75em;
    font-weight: 600;
    color: #666;
}

.cg2-chat-player .cg2-chat-speaker {
    text-align: right;
    color: var(--card-action-color, #C62828);
}

.cg2-chat-npc .cg2-chat-speaker {
    color: var(--card-talk-color, #1565C0);
}

.cg2-chat-text {
    padding: 10px 14px;
    border-radius: 12px;
    font-size: 0.95em;
    line-height: 1.4;
}

.cg2-chat-player .cg2-chat-text {
    background: var(--card-action-bg, #FFF3F0);
    border: 1px solid var(--card-action-color, #C62828);
    border-radius: 12px 12px 4px 12px;
}

.cg2-chat-npc .cg2-chat-text {
    background: var(--card-talk-bg, #E3F2FD);
    border: 1px solid var(--card-talk-color, #1565C0);
    border-radius: 12px 12px 12px 4px;
}

.cg2-chat-input-area {
    display: flex;
    gap: 8px;
    padding: 12px 16px;
    background: #f5f5f5;
    border-top: 1px solid #ddd;
}

.cg2-chat-input {
    flex: 1;
    padding: 10px 14px;
    border: 2px solid #ddd;
    border-radius: 20px;
    font-size: 0.95em;
    outline: none;
    transition: border-color 0.2s;
}

.cg2-chat-input:focus {
    border-color: var(--card-talk-color, #1565C0);
}

.cg2-chat-input:disabled {
    background: #eee;
    color: #999;
}

.cg2-chat-send {
    width: 44px;
    height: 44px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
}

.cg2-chat-send:disabled {
    opacity: 0.5;
}

.cg2-chat-actions {
    padding: 12px 16px;
    background: #f5f5f5;
    display: flex;
    justify-content: center;
}

/* ═══════════════════════════════════════════════════════
   Phase 9: Save/Load, Campaign, Level Up
   ═══════════════════════════════════════════════════════ */

/* ── Resume/Accent Button ──────────────────────────── */
.cg2-btn-accent { background: #2E7D32; color: #fff; border-color: #2E7D32; }
.cg2-btn-accent:hover { background: #388E3C; }
.dark .cg2-btn-accent { background: #2E7D32; color: #fff; border-color: #2E7D32; }
.dark .cg2-btn-accent:hover { background: #388E3C; }

/* ── Campaign Badge (Sidebar) ──────────────────────── */
.cg2-campaign-badge {
    display: flex;
    gap: 6px;
    align-items: center;
    font-size: 10px;
    padding: 3px 8px;
    background: linear-gradient(135deg, rgba(184,134,11,0.15), rgba(184,134,11,0.05));
    border: 1px solid rgba(184,134,11,0.3);
    border-radius: 6px;
    margin: 4px 0;
    color: #B8860B;
    font-weight: 600;
}
.cg2-campaign-level { font-weight: 700; }
.cg2-campaign-xp { opacity: 0.8; }
.cg2-campaign-record { opacity: 0.7; font-size: 9px; }

/* ── Deck List Campaign Info ───────────────────────── */
.cg2-deck-campaign-info {
    display: flex;
    gap: 8px;
    align-items: center;
    font-size: 10px;
    color: #B8860B;
    padding: 2px 0;
    font-weight: 600;
}

/* ── Game Over Campaign Section ────────────────────── */
.cg2-game-over-campaign {
    margin: 12px 0;
    padding: 12px;
    background: rgba(184,134,11,0.1);
    border-radius: 8px;
    text-align: center;
}
.cg2-campaign-progress {
    display: flex;
    align-items: center;
    gap: 8px;
    justify-content: center;
    font-size: 13px;
    font-weight: 600;
}
.cg2-campaign-xp-bar {
    flex: 1;
    max-width: 120px;
    height: 8px;
    background: rgba(0,0,0,0.15);
    border-radius: 4px;
    overflow: hidden;
    position: relative;
}
.cg2-campaign-xp-fill {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    background: linear-gradient(90deg, #B8860B, #DAA520);
    border-radius: 4px;
    transition: width 0.5s ease;
}
.cg2-campaign-record-line {
    font-size: 11px;
    color: #666;
    margin-top: 4px;
}
.cg2-xp-gain { color: #2E7D32; }

/* ── Level Up Dialog ───────────────────────────────── */
.cg2-levelup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.75);
    z-index: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: cg2-narration-fade-in 0.3s ease-out;
}
.cg2-levelup-panel {
    background: linear-gradient(135deg, #f5f0e6, #e8dcc8);
    border-radius: 16px;
    padding: 32px;
    max-width: 480px;
    width: 90%;
    text-align: center;
    box-shadow: 0 16px 48px rgba(0,0,0,0.4);
}
.dark .cg2-levelup-panel {
    background: linear-gradient(135deg, #2a2a2a, #1e1e1e);
    color: #f0e6d3;
}
.cg2-levelup-title {
    font-size: 24px;
    font-weight: 700;
    color: #B8860B;
    margin: 0 0 4px;
}
.cg2-levelup-subtitle {
    font-size: 13px;
    color: #666;
    margin-bottom: 16px;
}
.dark .cg2-levelup-subtitle { color: #999; }
.cg2-levelup-stats {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    margin-bottom: 20px;
}
.cg2-stat-pick {
    cursor: pointer;
    padding: 10px 12px;
    border: 2px solid transparent;
    border-radius: 10px;
    background: rgba(0,0,0,0.04);
    text-align: left;
    transition: border-color 0.15s, background 0.15s;
}
.dark .cg2-stat-pick { background: rgba(255,255,255,0.05); }
.cg2-stat-pick:hover { border-color: #B8860B; }
.cg2-stat-pick.selected {
    border-color: #2E7D32;
    background: rgba(46,125,50,0.1);
}
.cg2-stat-pick-name {
    font-weight: 700;
    font-size: 15px;
    color: #B8860B;
}
.cg2-stat-pick-value {
    font-size: 18px;
    font-weight: 700;
    margin: 2px 0;
}
.cg2-stat-pick-desc {
    font-size: 10px;
    color: #888;
}
.cg2-stat-pick-gained {
    font-size: 9px;
    color: #2E7D32;
    font-weight: 600;
    margin-top: 2px;
}
.cg2-levelup-actions {
    display: flex;
    gap: 8px;
    justify-content: center;
}

/* ── Small Buttons ───────────────────────────────── */
.cg2-btn-sm {
    padding: 3px 10px;
    font-size: 11px;
    border-radius: 6px;
}

/* ── Game Config Panel ───────────────────────────── */
.cg2-config-row {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 6px 0;
    border-bottom: 1px solid rgba(0,0,0,0.06);
}
.dark .cg2-config-row { border-bottom-color: rgba(255,255,255,0.06); }
.cg2-config-row:last-child { border-bottom: none; }
.cg2-config-label {
    display: flex;
    align-items: center;
    min-width: 140px;
    font-size: 12px;
    font-weight: 600;
    color: #555;
}
.dark .cg2-config-label { color: #bbb; }
.cg2-config-control {
    display: flex;
    align-items: center;
    flex: 1;
    gap: 6px;
}
.cg2-config-select {
    padding: 4px 8px;
    font-size: 11px;
    border: 1px solid rgba(0,0,0,0.15);
    border-radius: 6px;
    background: #fff;
    color: #333;
    min-width: 180px;
}
.dark .cg2-config-select { background: #333; color: #ddd; border-color: rgba(255,255,255,0.15); }
.cg2-btn-active {
    background: #2E7D32 !important;
    color: #fff !important;
    border-color: #2E7D32 !important;
}
.cg2-config-section-label {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: #B8860B;
    padding: 10px 0 4px;
    margin-top: 4px;
    border-top: 1px solid rgba(0,0,0,0.06);
}
.dark .cg2-config-section-label { color: #DAA520; border-top-color: rgba(255,255,255,0.06); }
.cg2-config-section-label:first-child { border-top: none; padding-top: 0; margin-top: 0; }

/* ── Test Mode ───────────────────────────────────── */
.cg2-test-mode {
    display: flex;
    flex-direction: column;
    height: 100%;
    min-height: 500px;
}
.cg2-test-categories {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    padding: 10px 16px;
    border-bottom: 1px solid rgba(0,0,0,0.08);
}
.dark .cg2-test-categories { border-bottom-color: rgba(255,255,255,0.08); }
.cg2-test-cat {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 10px;
    border-radius: 14px;
    font-size: 11px;
    cursor: pointer;
    border: 1px solid rgba(0,0,0,0.12);
    color: #666;
    transition: background 0.15s, color 0.15s, border-color 0.15s;
    user-select: none;
}
.dark .cg2-test-cat { border-color: rgba(255,255,255,0.12); color: #999; }
.cg2-test-cat:hover { border-color: #B8860B; color: #B8860B; }
.cg2-test-cat.active {
    background: #B8860B;
    color: #fff;
    border-color: #B8860B;
}
.cg2-test-summary {
    display: flex;
    gap: 16px;
    padding: 10px 16px;
    font-size: 13px;
    font-weight: 700;
    border-bottom: 1px solid rgba(0,0,0,0.08);
}
.dark .cg2-test-summary { border-bottom-color: rgba(255,255,255,0.08); }
.cg2-test-console {
    flex: 1;
    overflow-y: auto;
    padding: 10px 8px;
    background: #f8f6f2;
    color: #333;
    font-family: "Consolas", "Menlo", "Courier New", monospace;
    font-size: 11.5px;
    line-height: 1.6;
    border-radius: 0 0 12px 12px;
}
.dark .cg2-test-console { background: #1e1e1e; color: #ddd; }
.cg2-test-log-entry {
    display: flex;
    align-items: flex-start;
    gap: 6px;
    padding: 3px 8px;
    border-bottom: 1px solid rgba(0,0,0,0.06);
    border-radius: 3px;
}
.dark .cg2-test-log-entry { border-bottom-color: rgba(255,255,255,0.06); }
.cg2-test-log-entry:hover { background: rgba(0,0,0,0.03); }
.dark .cg2-test-log-entry:hover { background: rgba(255,255,255,0.04); }
.cg2-test-log-entry[data-status="pass"] { background: rgba(46,125,50,0.06); }
.cg2-test-log-entry[data-status="fail"] { background: rgba(198,40,40,0.06); }
.cg2-test-log-entry[data-status="warn"] { background: rgba(230,81,0,0.06); }
.dark .cg2-test-log-entry[data-status="pass"] { background: rgba(46,125,50,0.1); }
.dark .cg2-test-log-entry[data-status="fail"] { background: rgba(198,40,40,0.1); }
.dark .cg2-test-log-entry[data-status="warn"] { background: rgba(230,81,0,0.1); }
.cg2-test-log-time {
    color: #999;
    flex-shrink: 0;
    font-size: 10px;
    min-width: 60px;
}
.dark .cg2-test-log-time { color: #777; }
.cg2-test-log-cat {
    flex-shrink: 0;
    min-width: 80px;
    font-weight: 700;
    font-size: 10px;
    text-transform: uppercase;
    padding: 1px 6px;
    border-radius: 3px;
    text-align: center;
}
.cg2-test-log-cat[data-cat="storage"] { color: #1565C0; background: rgba(21,101,192,0.1); }
.cg2-test-log-cat[data-cat="narration"] { color: #6A1B9A; background: rgba(106,27,154,0.1); }
.cg2-test-log-cat[data-cat="combat"] { color: #C62828; background: rgba(198,40,40,0.1); }
.cg2-test-log-cat[data-cat="cards"] { color: #E65100; background: rgba(230,81,0,0.1); }
.cg2-test-log-cat[data-cat="campaign"] { color: #2E7D32; background: rgba(46,125,50,0.1); }
.cg2-test-log-cat[data-cat="llm"] { color: #00838F; background: rgba(0,131,143,0.1); }
.cg2-test-log-cat[data-cat="voice"] { color: #AD1457; background: rgba(173,20,87,0.1); }
.cg2-test-log-cat[data-cat="playthrough"] { color: #4527A0; background: rgba(69,39,160,0.1); }
.dark .cg2-test-log-cat[data-cat="storage"] { color: #64B5F6; background: rgba(100,181,246,0.12); }
.dark .cg2-test-log-cat[data-cat="narration"] { color: #CE93D8; background: rgba(206,147,216,0.12); }
.dark .cg2-test-log-cat[data-cat="combat"] { color: #EF9A9A; background: rgba(239,154,154,0.12); }
.dark .cg2-test-log-cat[data-cat="cards"] { color: #FFCC80; background: rgba(255,204,128,0.12); }
.dark .cg2-test-log-cat[data-cat="campaign"] { color: #A5D6A7; background: rgba(165,214,167,0.12); }
.dark .cg2-test-log-cat[data-cat="llm"] { color: #80DEEA; background: rgba(128,222,234,0.12); }
.dark .cg2-test-log-cat[data-cat="voice"] { color: #F48FB1; background: rgba(244,143,177,0.12); }
.dark .cg2-test-log-cat[data-cat="playthrough"] { color: #B39DDB; background: rgba(179,157,219,0.12); }
.cg2-test-log-msg {
    flex: 1;
    word-break: break-word;
}
.cg2-test-log-icon {
    flex-shrink: 0;
    font-size: 14px;
}
.cg2-test-section-header {
    padding: 6px 8px 3px;
    font-weight: 700;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: #B8860B;
    border-top: 2px solid rgba(184,134,11,0.2);
    margin-top: 6px;
}
.dark .cg2-test-section-header { color: #DAA520; border-top-color: rgba(218,165,32,0.2); }
.cg2-test-result-pass { color: #2E7D32; }
.dark .cg2-test-result-pass { color: #66BB6A; }
.cg2-test-result-fail { color: #c62828; }
.dark .cg2-test-result-fail { color: #EF5350; }
.cg2-test-result-warn { color: #E65100; }
.dark .cg2-test-result-warn { color: #FFA726; }
.cg2-test-empty {
    padding: 40px;
    text-align: center;
    color: #999;
    font-style: italic;
}

/* ── Theme Editor ────────────────────────────────── */
.cg2-theme-editor {
    display: flex;
    flex-direction: column;
    min-height: 400px;
}
.cg2-theme-list {
    padding: 12px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}
.cg2-theme-list-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    border-radius: 10px;
    background: rgba(0,0,0,0.03);
    border: 1px solid rgba(0,0,0,0.06);
    transition: background 0.15s;
}
.dark .cg2-theme-list-item { background: rgba(255,255,255,0.04); border-color: rgba(255,255,255,0.06); }
.cg2-theme-list-item:hover { background: rgba(0,0,0,0.06); }
.dark .cg2-theme-list-item:hover { background: rgba(255,255,255,0.07); }
.cg2-theme-list-name {
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 600;
    font-size: 14px;
}
.cg2-theme-badge-builtin {
    font-size: 9px;
    padding: 2px 6px;
    border-radius: 8px;
    background: #1565C0;
    color: #fff;
    font-weight: 600;
    text-transform: uppercase;
}
.cg2-theme-badge-custom {
    font-size: 9px;
    padding: 2px 6px;
    border-radius: 8px;
    background: #2E7D32;
    color: #fff;
    font-weight: 600;
    text-transform: uppercase;
}
.cg2-theme-list-actions {
    display: flex;
    gap: 6px;
}
.cg2-btn-danger {
    background: #c62828;
    color: #fff;
    border-color: #c62828;
}
.cg2-btn-danger:hover { background: #d32f2f; }

/* Theme JSON editor */
.cg2-json-editor-wrap {
    padding: 12px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    flex: 1;
}
.cg2-json-editor {
    width: 100%;
    min-height: 400px;
    font-family: "Consolas", "Menlo", "Courier New", monospace;
    font-size: 12px;
    line-height: 1.5;
    padding: 12px;
    border: 1px solid rgba(0,0,0,0.12);
    border-radius: 8px;
    background: #fafafa;
    color: #333;
    resize: vertical;
}
.dark .cg2-json-editor {
    background: #1a1a1a;
    color: #ccc;
    border-color: rgba(255,255,255,0.12);
}
.cg2-json-error {
    color: #c62828;
    font-size: 12px;
    padding: 6px 10px;
    background: rgba(198,40,40,0.08);
    border-radius: 6px;
}
.cg2-theme-reference {
    font-family: "Consolas", "Menlo", "Courier New", monospace;
    font-size: 11px;
    line-height: 1.5;
    white-space: pre-wrap;
    background: #f5f0e6;
    padding: 12px;
    border-radius: 8px;
    color: #555;
    max-height: 250px;
    overflow-y: auto;
}
.dark .cg2-theme-reference { background: #2a2520; color: #aaa; }

/* ── Card Effect Builder ──────────────────────────── */
.cg2-effect-builder {
    background: rgba(0,0,0,0.02);
    border: 1px solid rgba(0,0,0,0.06);
    border-radius: 10px;
    padding: 12px;
}
.dark .cg2-effect-builder { background: rgba(255,255,255,0.03); border-color: rgba(255,255,255,0.06); }
.cg2-effect-tokens {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    align-items: center;
}
.cg2-effect-section-label {
    font-size: 9px;
    font-weight: 700;
    color: #888;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin: 2px 4px 2px 8px;
}
.cg2-effect-section-label:first-child { margin-left: 0; }
.cg2-effect-token {
    padding: 3px 8px;
    border-radius: 12px;
    font-size: 10px;
    font-weight: 600;
    cursor: pointer;
    border: 1px solid transparent;
    transition: background 0.15s, transform 0.1s;
}
.cg2-effect-token:hover { transform: scale(1.05); }
.cg2-effect-token:active { transform: scale(0.95); }
.cg2-effect-token-damage { background: #FFCDD2; color: #c62828; }
.cg2-effect-token-damage:hover { background: #EF9A9A; }
.cg2-effect-token-heal { background: #C8E6C9; color: #2E7D32; }
.cg2-effect-token-heal:hover { background: #A5D6A7; }
.cg2-effect-token-debuff { background: #E1BEE7; color: #7B1FA2; }
.cg2-effect-token-debuff:hover { background: #CE93D8; }
.cg2-effect-token-buff { background: #BBDEFB; color: #1565C0; }
.cg2-effect-token-buff:hover { background: #90CAF9; }
.cg2-effect-token-util { background: #FFF9C4; color: #F57F17; }
.cg2-effect-token-util:hover { background: #FFF176; }
.cg2-effect-token-skill { background: #FFE0B2; color: #E65100; }
.cg2-effect-token-skill:hover { background: #FFCC80; }
.dark .cg2-effect-token-damage { background: #4E342E; color: #EF9A9A; }
.dark .cg2-effect-token-heal { background: #1B5E20; color: #A5D6A7; }
.dark .cg2-effect-token-debuff { background: #4A148C; color: #CE93D8; }
.dark .cg2-effect-token-buff { background: #0D47A1; color: #90CAF9; }
.dark .cg2-effect-token-util { background: #F57F17; color: #FFF9C4; }
.dark .cg2-effect-token-skill { background: #BF360C; color: #FFCC80; }
.cg2-effect-preview {
    margin-top: 8px;
    padding: 8px;
    background: rgba(255,255,255,0.6);
    border-radius: 8px;
    border: 1px solid rgba(0,0,0,0.08);
}
.dark .cg2-effect-preview { background: rgba(0,0,0,0.2); border-color: rgba(255,255,255,0.06); }

/* Empty state */
.cg2-empty-state {
    text-align: center;
    padding: 40px;
    color: #999;
    font-size: 14px;
}

/* ═══════════════════════════════════════════════════════
   Utility Classes — Extracted from inline styles
   ═══════════════════════════════════════════════════════ */

/* ── Material Icon Sizing ──────────────────────────── */
.cg2-icon-xs { font-size: 12px; vertical-align: middle; }
.cg2-icon-sm { font-size: 14px; vertical-align: middle; margin-right: 2px; }
.cg2-icon-md { font-size: 16px; vertical-align: middle; margin-right: 6px; }
.cg2-icon-lg { font-size: 32px; }
.cg2-icon-inline { font-size: 16px; vertical-align: middle; margin-right: 4px; }

/* ── Flex Layout Utilities ─────────────────────────── */
.cg2-flex-center { display: flex; align-items: center; }
.cg2-flex-center-gap { display: flex; align-items: center; gap: 8px; }
.cg2-flex-spaced { display: flex; justify-content: space-between; align-items: center; }
.cg2-flex-wrap { display: flex; flex-wrap: wrap; gap: 8px; }
.cg2-flex-col { display: flex; flex-direction: column; }
.cg2-flex-gap-4 { display: flex; gap: 4px; }
.cg2-flex-gap-6 { display: flex; gap: 6px; }
.cg2-flex-gap-12 { display: flex; gap: 12px; }

/* ── Text Utilities ────────────────────────────────── */
.cg2-text-muted { color: #888; }
.cg2-text-muted-light { color: #999; }
.cg2-text-muted-dark { color: #666; }
.cg2-text-xs { font-size: 10px; }
.cg2-text-sm { font-size: 11px; }
.cg2-text-md { font-size: 12px; }
.cg2-text-sm-muted { font-size: 11px; color: #999; }
.cg2-text-xs-muted { font-size: 10px; color: #999; }
.cg2-text-hint { font-size: 12px; color: #666; }
.dark .cg2-text-muted { color: #888; }
.dark .cg2-text-muted-light { color: #777; }
.dark .cg2-text-muted-dark { color: #999; }

/* ── Header/Title Utilities ────────────────────────── */
.cg2-header-lg { font-weight: 700; font-size: 16px; }
.cg2-header-md { font-weight: 700; font-size: 14px; }
.cg2-header-sm { font-weight: 600; font-size: 13px; }
.cg2-subheader { font-weight: 600; margin-bottom: 8px; }

/* ── Spacing Utilities ─────────────────────────────── */
.cg2-ml-auto { margin-left: auto; }
.cg2-ml-4 { margin-left: 4px; }
.cg2-ml-8 { margin-left: 8px; }
.cg2-ml-12 { margin-left: 12px; }
.cg2-mt-8 { margin-top: 8px; }
.cg2-mt-12 { margin-top: 12px; }
.cg2-mt-16 { margin-top: 16px; }
.cg2-mb-8 { margin-bottom: 8px; }
.cg2-mb-12 { margin-bottom: 12px; }
.cg2-mr-8 { margin-right: 8px; }
.cg2-mr-16 { margin-right: 16px; }

/* ── Image/Gallery Utilities ───────────────────────── */
.cg2-image-preview {
    max-width: 90vw;
    max-height: 90vh;
    object-fit: contain;
    border-radius: 8px;
    box-shadow: 0 4px 24px rgba(0,0,0,0.5);
}
.cg2-gallery-thumb {
    object-fit: cover;
    border-radius: 6px;
    cursor: pointer;
    border: 3px solid transparent;
    transition: border-color 0.15s;
}
.cg2-gallery-thumb.cg2-selected {
    border-color: #B8860B;
}

/* ── Close/Action Icons ────────────────────────────── */
.cg2-close-overlay {
    position: absolute;
    top: 16px;
    right: 16px;
    color: #fff;
    font-size: 32px;
    cursor: pointer;
}
.cg2-close-sm {
    cursor: pointer;
    font-size: 18px;
    color: #888;
}

/* ── Misc Utilities ────────────────────────────────── */
.cg2-fade { opacity: 0.7; }
.cg2-loading-centered { text-align: center; padding: 24px; }
.cg2-icon-expandable { transition: transform 0.2s; }
.cg2-icon-expanded { transform: rotate(90deg); }
