{
	"name": "olio.llm.chatRequest",
	"inherits": [
		"data.directory"
	],
	"group": "ChatRequests",
	"icon": "chat",
	"label": "Requests",
	"query": ["id", "groupId", "chatConfig", "promptConfig", "promptTemplate", "session", "sessionType", "setting", "contextType", "contextRefs"],
	"description": "Used for proxying chat requests",
	"fields": [
		{
			"name": "message",
			"type": "string",
			"ephemeral": true
		},
		{
			"name": "uid",
			"type": "string",
			"maxLength": 64,
			"ephemeral": true
		},
		{
			"name": "chatConfig",
			"type": "model",
			"baseModel": "olio.llm.chatConfig",
			"foreign": true
		},
		{
			"name": "promptConfig",
			"type": "model",
			"baseModel": "olio.llm.promptConfig",
			"foreign": true,
			"description": "PENDING DEPRECATION â€” promptTemplate replaces the structural role (sections, ordering, conditions). However, promptConfig is STILL REQUIRED for token replacement data (race definitions, response rules, scene templates used by PromptUtil.getChatPromptTemplate). Future phase will migrate token data into promptTemplate or chatConfig, at which point this field becomes fully deprecated."
		},
		{
			"name": "promptTemplate",
			"type": "model",
			"baseModel": "olio.llm.promptTemplate",
			"foreign": true,
			"description": "Structured prompt template. When set, Chat uses PromptTemplateComposer for prompt assembly instead of flat promptConfig arrays."
		},
		{
			"name": "sessionType",
			"type": "string",
			"maxLength": 64
		},
		{
			"name": "session",
			"baseModel": "$flex",
			"type": "model",
			"foreign": true,
			"foreignType": "sessionType"
		},
		{
			"name": "data",
			"type": "list",
			"baseType": "string",
			"ephemeral": true
		},
		{
			"name": "setting",
			"type": "string"
		},
		{
			"name": "contextType",
			"type": "string",
			"maxLength": 64,
			"description": "Model type of the associated context object (e.g. olio.charPerson, data.data)"
		},
		{
			"name": "context",
			"baseModel": "$flex",
			"type": "model",
			"foreign": true,
			"foreignType": "contextType",
			"description": "Generic context object associated with this chat session. Type determined by contextType field."
		},
		{
			"name": "contextRefs",
			"type": "list",
			"baseType": "string",
			"description": "Persisted context references (serialized {schema,objectId} JSON). Unlike ephemeral 'data', these survive across messages. Supports tags (schema=data.tag) for scoped vector queries."
		},
		{
			"name": "chatTitle",
			"type": "string",
			"maxLength": 256,
			"description": "Auto-generated conversation title."
		},
		{
			"name": "chatIcon",
			"type": "string",
			"maxLength": 64,
			"description": "Auto-generated Material Symbols icon name."
		}
	]
}